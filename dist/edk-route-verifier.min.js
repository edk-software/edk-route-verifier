!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=176)}([function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(43),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){var n=r(168),o=r(162);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},function(t,e){t.exports=function(t){return t}},function(t,e,r){var n=r(10),o=r(7),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&n(t)==i}},function(t,e,r){var n=r(44),o=r(29);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e,r){var n=r(107),o=r(104),i=r(3),a=r(0),u=r(94);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):n(t):u(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(1).Symbol;t.exports=n},function(t,e,r){var n=r(9),o=r(166),i=r(165),a="[object Null]",u="[object Undefined]",s=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?o(t):i(t)}},function(t,e,r){var n,o;!function(i,a){"use strict";void 0===(o="function"==typeof(n=function(){var t=function(){},e="undefined",r=["trace","debug","info","warn","error"];function n(t,e){var r=t[e];if("function"==typeof r.bind)return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch(e){return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function o(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function i(r,i,a){return function(r){"debug"===r&&(r="log");return typeof console!==e&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):t)}(r)||function(t,r,n){return function(){typeof console!==e&&(o.call(this,r,n),this[t].apply(this,arguments))}}.apply(this,arguments)}function a(t,n,a){var u,s=this,c="loglevel";function f(){var t;if(typeof window!==e){try{t=window.localStorage[c]}catch(t){}if(typeof t===e)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(t=/^([^;]+)/.exec(r.slice(n))[1])}catch(t){}return void 0===s.levels[t]&&(t=void 0),t}}t&&(c+=":"+t),s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=a||i,s.getLevel=function(){return u},s.setLevel=function(n,i){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(u=n,!1!==i&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window===e)return;try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}(n),o.call(s,n,t),typeof console===e&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(t){f()||s.setLevel(t,!1)},s.enableAll=function(t){s.setLevel(s.levels.TRACE,t)},s.disableAll=function(t){s.setLevel(s.levels.SILENT,t)};var l=f();null==l&&(l=null==n?"WARN":n),s.setLevel(l,!1)}var u=new a,s={};u.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=s[t];return e||(e=s[t]=new a(t,u.getLevel(),u.methodFactory)),e};var c=typeof window!==e?window.log:void 0;return u.noConflict=function(){return typeof window!==e&&window.log===u&&(window.log=c),u},u})?n.call(e,r,e,t):n)||(t.exports=o)}()},function(t,e,r){var n=r(4),o=1/0;t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,r){var n=r(116),o=r(47),i=r(5);t.exports=function(t){return i(t)?n(t):o(t)}},function(t,e,r){var n=r(134);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){var n=r(2)(Object,"create");t.exports=n},function(t,e,r){var n=r(25);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(152),o=r(151),i=r(150),a=r(149),u=r(148);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,r){var n=r(158),o=r(7),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sortBy=e.min=e.map=e.forEach=e.find=e.filter=e.isNull=e.isEqual=e.isEmpty=void 0;var n=r(172);e.isEmpty=n;var o=r(154);e.isEqual=o;var i=r(114);e.isNull=i;var a=r(113);e.filter=a;var u=r(91);e.find=u;var s=r(84);e.forEach=s;var c=r(81);e.map=c;var f=r(80);e.min=f;var l=r(77);e.sortBy=l},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},function(t,e,r){var n=r(0),o=r(4),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,r){var n=r(111),o=r(108)(n);t.exports=o},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){var n=r(142),o=r(135),i=r(133),a=r(132),u=r(131);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(153),o=r(7);t.exports=function t(e,r,i,a,u){return e===r||(null==e||null==r||!o(e)&&!o(r)?e!=e&&r!=r:n(e,r,i,a,t,u))}},function(t,e,r){var n=r(156),o=r(40),i=r(155),a=i&&i.isTypedArray,u=a?o(a):n;t.exports=u},function(t,e,r){(function(t){var n=r(1),o=r(157),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i?n.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;t.exports=s}).call(this,r(41)(t))},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,r){var n=r(2)(r(1),"Map");t.exports=n},function(t,e,r){var n=r(22),o=r(5);t.exports=function(t,e){var r=-1,i=o(t)?Array(t.length):[];return n(t,function(t,n,o){i[++r]=e(t,n,o)}),i}},function(t,e,r){var n=r(0),o=r(21),i=r(102),a=r(99);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,r){var n=r(32),o=r(12);t.exports=function(t,e){for(var r=0,i=(e=n(e,t)).length;null!=t&&r<i;)t=t[o(e[r++])];return r&&r==i?t:void 0}},function(t,e){t.exports=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}},function(t,e,r){var n=r(8);t.exports=function(t){return t==t&&!n(t)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},function(t,e,r){var n=r(130),o=r(127),i=r(126),a=1,u=2;t.exports=function(t,e,r,s,c,f){var l=r&a,h=t.length,p=e.length;if(h!=p&&!(l&&p>h))return!1;var d=f.get(t);if(d&&f.get(e))return d==e;var v=-1,g=!0,y=r&u?new n:void 0;for(f.set(t,e),f.set(e,t);++v<h;){var m=t[v],b=e[v];if(s)var w=l?s(b,m,v,e,t,f):s(m,b,v,t,e,f);if(void 0!==w){if(w)continue;g=!1;break}if(y){if(!o(e,function(t,e){if(!i(y,e)&&(m===t||c(m,t,r,s,f)))return y.push(e)})){g=!1;break}}else if(m!==b&&!c(m,b,r,s,f)){g=!1;break}}return f.delete(t),f.delete(e),g}},function(t,e,r){var n=r(17),o=r(147),i=r(146),a=r(145),u=r(144),s=r(143);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(167))},function(t,e,r){var n=r(10),o=r(8),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=n(t);return e==a||e==u||e==i||e==s}},function(t,e,r){var n=r(169),o=r(30),i=r(161),a=r(160),u=r(159),s=r(10),c=r(42),f=c(n),l=c(o),h=c(i),p=c(a),d=c(u),v=s;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),r="[object Object]"==e?t.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,r){var n=r(46),o=r(171),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},function(t,e,r){"use strict";var n=u(r(11)),o=u(r(175)),i=u(r(50)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(19));function u(t){return t&&t.__esModule?t:{default:t}}function s(){return(s=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)}function c(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&c(t.prototype,e),r&&c(t,r)}(t,null,[{key:"getGeoJSON",value:function(t){for(var e=t.getElementsByTagName("ExtendedData"),r=e.length-1;0<=r;r--)e[r].parentNode.removeChild(e[r]);n.default.log("KML (no ExtendedData):",t);var a=o.default.kml(t);return a=(0,i.default)(a),n.default.log("GeoJSON (flatten): ",a),a}},{key:"getNumberOfFeatures",value:function(t,e){return a.filter(e.features,function(e){return a.isEqual(e.geometry.type,t)}).length}},{key:"getLineString",value:function(t){return a.find(t.features,function(t){return a.isEqual(t.geometry.type,"LineString")})}},{key:"reverseLineString",value:function(t){var e=s({},t);return e.geometry.coordinates=t.geometry.coordinates.reverse(),e}},{key:"getPoints",value:function(t){return a.filter(t.features,function(t){return a.isEqual(t.geometry.type,"Point")})}},{key:"getRoute",value:function(t){return n.default.debug("Fetching route from:",t),$.ajax(t)}},{key:"getGoogleMapsPath",value:function(t){return a.map(t.geometry.coordinates,function(t){return new google.maps.LatLng(t[1],t[0])})}},{key:"getPathElevations",value:function(t,e){if(e&&3===t.geometry.coordinates[0].length){n.default.debug("Getting path elevations from line string...");var r=a.map(t.geometry.coordinates,function(t){return{elevation:t[2]}});return n.default.debug("Elevations:",r),new Promise(function(t){t(r)})}var o=this.getGoogleMapsPath(t);if(n.default.debug("Number of LatLng objects:",o.length),o.length>1024){for(var i=[],u=parseFloat(o.length/1024),s=0;s<o.length;s+=u)i.push(o[Math.floor(s)]);o=i,n.default.debug("Number of LatLng objects after optimization:",o.length)}return new Promise(function(t,e){(new google.maps.ElevationService).getElevationAlongPath({path:o,samples:512},function(r,n){n===google.maps.ElevationStatus.OK?t(r):e(n)})})}},{key:"getRouteParameters",value:function(t){return new Promise(function(e,r){$.ajax(t).done(function(t){n.default.debug("Route parameters:",t),1===t.success?e(t):r("Server side error: ".concat(t.error))}).fail(function(t,e){r(e)})})}},{key:"approveRoute",value:function(t){return new Promise(function(e,r){$.ajax(t).done(function(){e({success:!0})}).fail(function(t,e){r(e)})})}}]),t}();e.default=f},function(t,e,r){var n=r(58),o=r(56),i=o.featureEach,a=o.coordEach;function u(t){var e=n(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=s(e)).bbox=e}else t.bbox=t.bbox?t.bbox:c(t);return n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var r=s(t);r.bbox=t,e.push(r)}):i(t,function(t){t.bbox=t.bbox?t.bbox:c(t),e.push(t)}),n.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=s(e)).bbox=e}return n.prototype.remove.call(this,t)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:n.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:n.prototype.all.call(this)}},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:c(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function s(t){var e=[t[0],t[1]],r=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,r,e]]}}}function c(t){var e=[1/0,1/0,-1/0,-1/0];return a(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}t.exports=u,t.exports.default=u},function(t,e,r){"use strict";r.r(e);function n(t,e,r){if(!a(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&u(n),o&&s(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function o(t,e){if(!a(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&u(r),n&&s(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}function i(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function a(t){return!!t&&t.constructor===Object}function u(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!i(t))throw new Error("bbox must only contain numbers")})}function s(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function c(t,e){var r,n,o,i,a,u,s,c,f,l,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(r=0;r<v;r++){for(u=p?t.features[r].geometry:d?t.geometry:t,c=p?t.features[r].properties:d?t.properties:{},f=p?t.features[r].bbox:d?t.bbox:void 0,l=p?t.features[r].id:d?t.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,c,f,l))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,c,f,l))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,f,l))return!1;h++}}function f(t,e){c(t,function(t,r,o,i,a){var u,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n(t,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var c=0;c<t.coordinates.length;c++){var f=t.coordinates[c];if(!1===e(n({type:u,coordinates:f},o),r,c))return!1}})}e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return f(t,function(t){e.push(t)}),o(e)}},function(t,e,r){"use strict";r.r(e);function n(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var o={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function i(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=o[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function a(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function u(t){return!!t&&t.constructor===Object}e.default=function(t,e,r){if(!u(r=r||{}))throw new Error("options is invalid");var o=r.units,s=n(t),c=n(e),f=a(c[1]-s[1]),l=a(c[0]-s[0]),h=a(s[1]),p=a(c[1]),d=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(h)*Math.cos(p);return i(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),o)}},function(t,e,r){"use strict";function n(t){if(!t)throw new Error("obj is required");var e=function(t){if(!t)throw new Error("obj is required");var e;t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates);if(e)return function t(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}(t);if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw new Error("Coordinate is not a valid Point")}function o(t,e,r){if(!0===("object"==typeof r?r.final:r))return function(t,e){var r=o(e,t);return r=(r+180)%360}(t,e);var i=Math.PI/180,a=180/Math.PI,u=n(t),s=n(e),c=i*u[0],f=i*s[0],l=i*u[1],h=i*s[1],p=Math.sin(f-c)*Math.cos(h),d=Math.cos(l)*Math.sin(h)-Math.sin(l)*Math.cos(h)*Math.cos(f-c);return a*Math.atan2(p,d)}r.r(e);var i=o;function a(t){if(!t)throw new Error("obj is required");var e=u(t);if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw new Error("Coordinate is not a valid Point")}function u(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function s(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function c(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("Coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r,n)}function f(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!p(t[0][1])||!p(t[0][1]))throw new Error("Coordinates must contain numbers");return s({type:"LineString",coordinates:t},e,r,n)}var l={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65};function h(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=l[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var d=function(t,e,r){var n="object"==typeof r?r.units:r,o=Math.PI/180,i=a(t),u=a(e),s=o*(u[1]-i[1]),c=o*(u[0]-i[0]),f=o*i[1],l=o*u[1],p=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(f)*Math.cos(l);return h(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),n)};function v(t){if(!t)throw new Error("obj is required");var e=function(t){if(!t)throw new Error("obj is required");var e;t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates);if(e)return function t(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}(t);if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw new Error("Coordinate is not a valid Point")}function g(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function y(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("Coordinates must contain numbers");return g({type:"Point",coordinates:t},e,r,n)}var m={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65};function b(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=m[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t/r}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var x=function(t,e,r,n){var o="object"==typeof n?n.units:n,i=Math.PI/180,a=180/Math.PI,u=v(t),s=i*u[0],c=i*u[1],f=i*r,l=b(e,o),h=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(f));return y([a*(s+Math.atan2(Math.sin(f)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(h))),a*h])},E=r(49),P=r.n(E);function _(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function j(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!M(t[0][1])||!M(t[0][1]))throw new Error("Coordinates must contain numbers");return _({type:"LineString",coordinates:t},e,r,n)}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function O(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function S(t,e){var r,n,o,i,a,u,s,c,f=0,l="FeatureCollection"===t.type,h="Feature"===t.type,p=l?t.features.length:1;for(r=0;r<p;r++){for(u=l?t.features[r].geometry:h?t.geometry:t,c=l?t.features[r].properties:h?t.properties:{},a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,f,c);break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)e(i.geometries[n],f,c);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,c);f++}}function k(t,e){S(t,function(t,r,n){var o,i=null===t?null:t.type;switch(i){case null:case"Point":case"LineString":case"Polygon":return void e(C(t,n),r,0)}switch(i){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,i){e(C({type:o,coordinates:t},n),r,i)})})}function C(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}var L=function(t){if(!t)throw new Error("geojson is required");var e=[];return k(t,function(t){!function(t,e){var r=[],n=t.geometry;switch(n.type){case"Polygon":r=O(n);break;case"LineString":r=[O(n)]}r.forEach(function(r){var n=function(t,e){var r=[];return t.reduce(function(t,n){var o,i,a,u,s,c,f=j([t,n],e);return f.bbox=(i=n,a=(o=t)[0],u=o[1],s=i[0],c=i[1],[a<s?a:s,u<c?u:c,a>s?a:s,u>c?u:c]),r.push(f),n}),r}(r,t.properties);n.forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),function(t,e,r){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),e&&(n.bbox=e),n.features=t,n}(e)};function A(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function N(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)e(t.features[r],r)}function T(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function F(t,e,r,n){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!R(t[0])||!R(t[1]))throw new Error("Coordinates must contain numbers");return T({type:"Point",coordinates:t},e,r,n)}function I(t,e,r){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),e&&(n.bbox=e),n.features=t,n}function R(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function B(t,e){var r=A(t),n=A(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],i=r[0][1],a=r[1][0],u=r[1][1],s=n[0][0],c=n[0][1],f=n[1][0],l=n[1][1],h=(l-c)*(a-o)-(f-s)*(u-i),p=(f-s)*(i-c)-(l-c)*(o-s),d=(a-o)*(i-c)-(u-i)*(o-s);if(0===h)return null;var v=p/h,g=d/h;return v>=0&&v<=1&&g>=0&&g<=1?F([o+v*(a-o),i+v*(u-i)]):null}var X=function(t,e){var r={},n=[];if("LineString"===t.type&&(t=T(t)),"LineString"===e.type&&(e=T(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=B(t,e);return o&&n.push(o),I(n)}var i=P()();return i.load(L(e)),N(L(t),function(t){N(i.search(t),function(e){var o=B(t,e);if(o){var i=A(o).join(",");r[i]||(r[i]=!0,n.push(o))}})}),I(n)};function q(t,e){var r,n,o,i,a,u,s,c,f=0,l="FeatureCollection"===t.type,h="Feature"===t.type,p=l?t.features.length:1;for(r=0;r<p;r++){for(u=l?t.features[r].geometry:h?t.geometry:t,c=l?t.features[r].properties:h?t.properties:{},a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,f,c);break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)e(i.geometries[n],f,c);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,c);f++}}function D(t,e){q(t,function(t,r,n){var o,i=null===t?null:t.type;switch(i){case null:case"Point":case"LineString":case"Polygon":return void e(Y(t,n),r,0)}switch(i){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,i){e(Y({type:o,coordinates:t},n),r,i)})})}function Y(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}e.default=function(t,e,r){var n="object"==typeof r?r.units:r,o=t.geometry?t.geometry.type:t.type;if("LineString"!==o&&"MultiLineString"!==o)throw new Error("lines must be LineString or MultiLineString");var a=c([1/0,1/0],{dist:1/0}),s=0;return D(t,function(t){for(var r=u(t),o=0;o<r.length-1;o++){var l=c(r[o]);l.properties.dist=d(e,l,n);var h=c(r[o+1]);h.properties.dist=d(e,h,n);var p=d(l,h,n),v=Math.max(l.properties.dist,h.properties.dist),g=i(l,h),y=x(e,v,g+90,n),m=x(e,v,g-90,n),b=X(f([y.geometry.coordinates,m.geometry.coordinates]),f([l.geometry.coordinates,h.geometry.coordinates])),w=null;b.features.length>0&&((w=b.features[0]).properties.dist=d(e,w,n),w.properties.location=s+d(l,w,n)),l.properties.dist<a.properties.dist&&((a=l).properties.index=o,a.properties.location=s),h.properties.dist<a.properties.dist&&((a=h).properties.index=o+1,a.properties.location=s+p),w&&w.properties.dist<a.properties.dist&&((a=w).properties.index=o),s+=p}}),a}},function(t,e,r){"use strict";var n,o=(n=r(11))&&n.__esModule?n:{default:n},i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(19));function a(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t,e){var r="bg-yellow",n="span.info-box-icon";i.isNull(e)?$("".concat(t," ").concat(n)).removeClass([r,"bg-green"].join(" ")):e?$("".concat(t," ").concat(n)).removeClass(r).addClass("bg-green"):$("".concat(t," ").concat(n)).removeClass("bg-green").addClass(r)},s=function(t,e,r){o.default.debug("Updating control element",t,"with:",e,r),$("".concat(t," ").concat("span.info-box-number")).html("".concat(e," ").concat(r?"<small>".concat(r,"</small>"):""))},c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r)}(t,[{key:"updateRouteType",value:function(t){var e=$("input#normalRouteString").attr("value"),r=$("input#inspiredRouteString").attr("value");s("div#routeType",t?e:r)}},{key:"updatePathLength",value:function(t,e){s("div#pathLength",e.toFixed(2),"km"),u("div#pathLength",t)}},{key:"updateElevationGain",value:function(t,e){s("div#elevationGain",e.toFixed(2),"m"),u("div#elevationGain",t)}},{key:"updateElevationLoss",value:function(t,e){s("div#elevationLoss",e.toFixed(2),"m"),u("div#elevationLoss",t)}},{key:"updateElevationTotalChange",value:function(t,e){s("div#elevationTotalChange",e.toFixed(2),"m"),u("div#elevationTotalChange",t)}},{key:"updateNumberOfStations",value:function(t){u("div#numberOfStations",t)}},{key:"updateStationsOrder",value:function(t){u("div#stationsOrder",t)}},{key:"updateStationsOnPath",value:function(t){u("div#stationsOnPath",t)}},{key:"updateSinglePath",value:function(t){u("div#singlePath",t)}},{key:"updateDataConsistency",value:function(t){u("div#dataConsistency",t)}},{key:"drawElevationChart",value:function(t){var e=parseInt(t.data.length/10),r=i.map(t.data,function(t){return t.distance.toFixed()}),n=i.map(t.data,function(t){return t.elevation});o.default.debug("Drawing elevation chart. Input:",t),new Chart($("canvas#elevationChart"),{type:"line",data:{labels:r,datasets:[{label:"",data:n,fill:"start",radius:0,backgroundColor:"rgb(32, 77, 116)"}]},options:{scales:{xAxes:[{scaleLabel:{display:!0,labelString:"[km]"},ticks:{callback:function(r,n){0==n%e||t.data.length}}}],yAxes:[{scaleLabel:{display:!0,labelString:"[m]"}}]},legend:{display:!1},tooltips:{enabled:!1}}})}},{key:"resetElevationChart",value:function(){var t=$("canvas#elevationChart").parent();$("canvas#elevationChart").remove(),t.append('<canvas id="elevationChart"></canvas>')}},{key:"addLoaderToButton",value:function(){$("button#verifyRoute").append('<div id="loader" class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')}},{key:"removeLoaderFromButton",value:function(){$("".concat("button#verifyRoute"," ").concat("div#loader")).remove()}},{key:"resetAll",value:function(t){var e=void 0===t?null:t;s("div#routeType",""),s("div#pathLength",""),u("div#pathLength",e),s("div#elevationGain",""),u("div#elevationGain",e),s("div#elevationLoss",""),u("div#elevationLoss",e),s("div#elevationTotalChange",""),u("div#elevationTotalChange",e),u("div#numberOfStations",e),u("div#stationsOrder",e),u("div#stationsOnPath",e),u("div#singlePath",e),u("div#dataConsistency",e),this.resetElevationChart()}}]),t}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.routeUrl=$("div#map-canvas").attr("data-what"),this.routeParamsUrl=$("div#map-canvas").attr("data-route-params"),this.routeApproveUrl=$("div#map-canvas").attr("data-route-approve")}},function(t,e){function r(t,e,r,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n,o){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("Coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n,o)}function o(t,e,n,o){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var a=t[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++){if(0===i&&0===u&&!d(a[0][0])||!d(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:t},e,n,o)}function i(t,e,n,o){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!d(t[0][1])||!d(t[0][1]))throw new Error("Coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n,o)}function a(t,e,n,o){if(!t)throw new Error("No coordinates passed");return r({type:"MultiLineString",coordinates:t},e,n,o)}function u(t,e,n,o){if(!t)throw new Error("No coordinates passed");return r({type:"MultiPoint",coordinates:t},e,n,o)}function s(t,e,n,o){if(!t)throw new Error("No coordinates passed");return r({type:"MultiPolygon",coordinates:t},e,n,o)}var c={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},f={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function l(t,e){if(void 0===t||null===t)throw new Error("radians is required");var r=c[e||"kilometers"];if(!r)throw new Error("units is invalid");return t*r}function h(t,e){if(void 0===t||null===t)throw new Error("distance is required");var r=c[e||"kilometers"];if(!r)throw new Error("units is invalid");return t/r}function p(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}t.exports={feature:r,geometry:function(t,e,r){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");var c;switch(t){case"Point":c=n(e).geometry;break;case"LineString":c=i(e).geometry;break;case"Polygon":c=o(e).geometry;break;case"MultiPoint":c=u(e).geometry;break;case"MultiLineString":c=a(e).geometry;break;case"MultiPolygon":c=s(e).geometry;break;default:throw new Error(t+" is invalid")}return r&&(c.bbox=r),c},featureCollection:function(t,e,r){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),e&&(n.bbox=e),n.features=t,n},geometryCollection:function(t,e,n,o){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return r({type:"GeometryCollection",geometries:t},e,n,o)},point:n,multiPoint:u,lineString:i,multiLineString:a,polygon:o,multiPolygon:s,radiansToDistance:l,distanceToRadians:h,distanceToDegrees:function(t,e){return p(h(t,e))},radians2degrees:p,degrees2radians:function(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,r){if(null===t||void 0===t)throw new Error("distance is required");if(!(t>=0))throw new Error("distance must be a positive number");return l(h(t,e),r||"kilometers")},convertArea:function(t,e,r){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var n=f[e||"meters"];if(!n)throw new Error("invalid original units");var o=f[r||"kilometers"];if(!o)throw new Error("invalid final units");return t/n*o},round:function(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},isNumber:d}},function(t,e,r){"use strict";function n(t,e,r){if(null!==t){var o,i,a,u,s,c,f,l,h,p,d=0,v=0,g=t.type,y="FeatureCollection"===g,m="Feature"===g,b=y?t.features.length:1;for(o=0;o<b;o++)for(f=(p=!!(h=y?t.features[o].geometry:m?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1,i=0;i<f;i++){var w=0;if(null!==(c=p?h.geometries[i]:h)){l=c.coordinates;var x=c.type;switch(d=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(l,v,o,w),v++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<l.length;a++)e(l[a],v,o,w),v++,"MultiPoint"===x&&w++;"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<l.length;a++){for(u=0;u<l[a].length-d;u++)e(l[a][u],v,o,w),v++;"MultiLineString"===x&&w++}"Polygon"===x&&w++;break;case"MultiPolygon":for(a=0;a<l.length;a++){for(u=0;u<l[a].length;u++)for(s=0;s<l[a][u].length-d;s++)e(l[a][u][s],v,o,w),v++;w++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)n(c.geometries[a],e,r);break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,r,o){var i=r;return n(t,function(t,n,o,a){i=0===n&&void 0===r?t:e(i,t,n,o,a)},o),i}function i(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length;r++)e(t.features[r].properties,r);break;case"Feature":e(t.properties,0)}}function a(t,e,r){var n=r;return i(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n}function u(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)e(t.features[r],r)}function s(t,e,r){var n=r;return u(t,function(t,o){n=0===o&&void 0===r?t:e(n,t,o)}),n}function c(t){var e=[];return n(t,function(t){e.push(t)}),e}function f(t,e){var r,n,o,i,a,u,s,c,f=0,l="FeatureCollection"===t.type,h="Feature"===t.type,p=l?t.features.length:1;for(r=0;r<p;r++){for(u=l?t.features[r].geometry:h?t.geometry:t,c=l?t.features[r].properties:h?t.properties:{},a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,f,c);break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)e(i.geometries[n],f,c);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,c);f++}}function l(t,e,r){var n=r;return f(t,function(t,o,i){n=0===o&&void 0===r?t:e(n,t,o,i)}),n}function h(t,e){f(t,function(t,r,n){var o,i=null===t?null:t.type;switch(i){case null:case"Point":case"LineString":case"Polygon":return void e(g(t,n),r,0)}switch(i){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,i){e(g({type:o,coordinates:t},n),r,i)})})}function p(t,e,r){var n=r;return h(t,function(t,o,i){n=0===o&&0===i&&void 0===r?t:e(n,t,o,i)}),n}function d(t,e){h(t,function(t,r,n){var i=0;if(t.geometry){var a=t.geometry.type;"Point"!==a&&"MultiPoint"!==a&&o(t,function(o,a){var u=y([o,a],t.properties);return e(u,r,n,i),i++,a})}})}function v(t,e,r){var n=r,o=!1;return d(t,function(t,i,a,u){n=!1===o&&void 0===r?t:e(n,t,i,a,u),o=!0}),n}function g(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}function y(t,e){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");return{type:"Feature",properties:e||{},geometry:{type:"LineString",coordinates:t}}}function m(t,e){if(!t)throw new Error("geojson is required");var r=t.geometry?t.geometry.type:t.type;if(!r)throw new Error("invalid geojson");if("FeatureCollection"===r)throw new Error("FeatureCollection is not supported");if("GeometryCollection"===r)throw new Error("GeometryCollection is not supported");var n=t.geometry?t.geometry.coordinates:t.coordinates;if(!n)throw new Error("geojson must contain coordinates");switch(r){case"LineString":return void e(n,0,0);case"Polygon":case"MultiLineString":for(var o=0,i=0;i<n.length;i++)"MultiLineString"===r&&(o=i),e(n[i],i,o);return;case"MultiPolygon":for(var a=0;a<n.length;a++)for(var u=0;u<n[a].length;u++)e(n[a][u],u,a);return;default:throw new Error(r+" geometry not supported")}}function b(t,e,r){var n=r;return m(t,function(t,o,i){n=0===o&&void 0===r?t:e(n,t,o,i)}),n}r.r(e),r.d(e,"coordEach",function(){return n}),r.d(e,"coordReduce",function(){return o}),r.d(e,"propEach",function(){return i}),r.d(e,"propReduce",function(){return a}),r.d(e,"featureEach",function(){return u}),r.d(e,"featureReduce",function(){return s}),r.d(e,"coordAll",function(){return c}),r.d(e,"geomEach",function(){return f}),r.d(e,"geomReduce",function(){return l}),r.d(e,"flattenEach",function(){return h}),r.d(e,"flattenReduce",function(){return p}),r.d(e,"segmentEach",function(){return d}),r.d(e,"segmentReduce",function(){return v}),r.d(e,"feature",function(){return g}),r.d(e,"lineString",function(){return y}),r.d(e,"lineEach",function(){return m}),r.d(e,"lineReduce",function(){return b})},function(t,e,r){"use strict";function n(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function o(t,e){return t<e?-1:t>e?1:0}t.exports=function t(e,r,i,a,u){i=i||0;a=a||e.length-1;u=u||o;for(;a>i;){if(a-i>600){var s=a-i+1,c=r-i+1,f=Math.log(s),l=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*l*(s-l)/s)*(c-s/2<0?-1:1),p=Math.max(i,Math.floor(r-c*l/s+h)),d=Math.min(a,Math.floor(r+(s-c)*l/s+h));t(e,r,p,d,u)}var v=e[r],g=i,y=a;for(n(e,i,r),u(e[a],v)>0&&n(e,i,a);g<y;){for(n(e,g,y),g++,y--;u(e[g],v)<0;)g++;for(;u(e[y],v)>0;)y--}0===u(e[i],v)?n(e,i,y):n(e,++y,a),y<=r&&(i=y+1),r<=y&&(a=y-1)}}},function(t,e,r){"use strict";t.exports=o;var n=r(57);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){u(t,0,t.children.length,e,t)}function u(t,e,r,n,o){o||(o=v(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],s(o,t.leaf?n(i):i);return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function f(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,r,o,i){for(var a,u=[e,r];u.length;)(r=u.pop())-(e=u.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),u.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!d(t,e))return r;for(var o,i,a,u,s=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],d(t,u=e.leaf?n(a):a)&&(e.leaf?r.push(a):p(t,u)?this._all(a,r):s.push(a));e=s.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!d(t,e))return!1;for(var n,o,i,a,u=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],d(t,a=e.leaf?r(i):i)){if(e.leaf||p(t,a))return!0;u.push(i)}e=u.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,u=this.data,s=this.toBBox(t),c=[],f=[];u||c.length;){if(u||(u=c.pop(),n=c[c.length-1],r=f.pop(),a=!0),u.leaf&&-1!==(o=i(t,u.children,e)))return u.children.splice(o,1),c.push(u),this._condense(c),this;a||u.leaf||!p(u,s)?n?(r++,u=n.children[r],a=!1):u=null:(c.push(u),f.push(r),r=0,n=u,u=u.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,u=this._maxEntries;if(i<=u)return a(o=v(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(u)),u=Math.ceil(i/Math.pow(u,n-1))),(o=v([])).leaf=!1,o.height=n;var s,c,f,l,h=Math.ceil(i/u),p=h*Math.ceil(Math.sqrt(u));for(g(t,e,r,p,this.compareMinX),s=e;s<=r;s+=p)for(g(t,s,f=Math.min(s+p-1,r),h,this.compareMinY),c=s;c<=f;c+=h)l=Math.min(c+h-1,f),o.children.push(this._build(t,c,l,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,u,s,c,f,h,p,d;n.push(e),!e.leaf&&n.length-1!==r;){for(f=h=1/0,o=0,i=e.children.length;o<i;o++)s=l(a=e.children[o]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-s)<h?(h=c,f=s<f?s:f,u=a):c===h&&s<f&&(f=s,u=a);e=u||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),s(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),u=v(r.children.splice(i,r.children.length-i));u.height=r.height,u.leaf=r.leaf,a(r,this.toBBox),a(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(r,u)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,s,c,f,h,p,d,v,g,y,m;for(c=f=1/0,n=e;n<=r-e;n++)o=u(t,0,n,this.toBBox),i=u(t,n,r,this.toBBox),p=o,d=i,void 0,void 0,void 0,void 0,v=Math.max(p.minX,d.minX),g=Math.max(p.minY,d.minY),y=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),a=Math.max(0,y-v)*Math.max(0,m-g),s=l(o)+l(i),a<c?(c=a,h=n,f=s<f?s:f):a===c&&s<f&&(f=s,h=n);return h},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:c,o=t.leaf?this.compareMinY:f;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,c=u(t,0,e,a),f=u(t,r-e,r,a),l=h(c)+h(f);for(o=e;o<r-e;o++)i=t.children[o],s(c,t.leaf?a(i):i),l+=h(c);for(o=r-e-1;o>=e;o--)i=t.children[o],s(f,t.leaf?a(i):i),l+=h(f);return l},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,r){"use strict";var n=s(r(11)),o=s(r(52)),i=s(r(51)),a=s(r(55)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(19));function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f={pointOnLine:o.default,distance:i.default,helpers:a.default},l=0,h=1,p=14,d=15,v=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.points=e,this.path=r,this.pathReversed=!1,this.pathCircular=!1,this.pathStart=f.helpers.point(this.path.geometry.coordinates[0]),this.pathEnd=f.helpers.point(this.path.geometry.coordinates[this.path.geometry.coordinates.length-1]),this._sortPoints(),this._addIndexes(),this._updateCircularity(),this.pathCircular||this._updateDirection()}return function(t,e,r){e&&c(t.prototype,e),r&&c(t,r)}(t,[{key:"_sortPoints",value:function(){var t=this.path,e=u.map(this.points,function(e){return e.properties.nearestOnLine=f.pointOnLine(t,e,"meters"),e}),r=u.sortBy(e,function(t){return t.properties.nearestOnLine.properties.location});this.points=r}},{key:"_addIndexes",value:function(){this.points=u.map(this.points,function(t){var e=function(t){var e=/^(wstęp|wprowadzenie|początek|start)$/gi,r=/^(zakończenie|koniec|podsumowanie)$/gi,o=/^(I|II|III|IV|V|VI|VII|VIII|IX|X|XI|XII|XIII|XIV)$/g,i=/^\d+$/g,a={I:1,II:2,III:3,IV:4,V:5,VI:6,VII:7,VIII:8,IX:9,X:10,XI:11,XII:12,XIII:13,XIV:14},s=null;if(n.default.debug("Checking station index for string: ".concat(t)),!t)return s;var c=t.trim().split(/[ ,\._\-:;]+/);return u.forEach(c,function(t){var n=t.match(o);if(!u.isNull(n))return s=a[n[0]],!1;if(n=t.match(i),!u.isNull(n)){var c=parseInt(n[0]);return!(c>=h&&c<=p&&(s=c,1))}return n=t.match(e),u.isNull(n)?(n=t.match(r),u.isNull(n)?void 0:(s=d,!1)):(s=l,!1)}),s}(t.properties.name);return t.properties.index=e,t})}},{key:"_updateDirection",value:function(){var t=u.filter(this.points,function(t){return t.properties.index===l}),e=u.filter(this.points,function(t){return t.properties.index===d}),r={units:"kilometers"};if(u.isEmpty(t)){if(!u.isEmpty(e)){n.default.debug("End point detected. Checking if it is closer to path start or path end...");var o=f.distance(this.pathStart,e[0],r);f.distance(this.pathEnd,e[0],r)>o&&(n.default.debug("Reversed path detected. Start point is closer to path end."),this.pathReversed=!0)}}else n.default.debug("Start point detected. Checking if it is closer to path start or path end..."),f.distance(this.pathStart,t[0],r)>f.distance(this.pathEnd,t[0],r)&&(n.default.debug("Reversed path detected. Start point is closer to path end."),this.pathReversed=!0);this.pathReversed&&(n.default.debug("Reversing points."),this.points=this.points.reverse())}},{key:"_updateCircularity",value:function(){var t=f.distance(this.pathStart,this.pathEnd,{units:"kilometers"});500>=(t*=1e3)&&(n.default.debug("Circular path detected. Distance between path start and end points:",t.toFixed(2),"meters."),this.pathCircular=!0)}},{key:"getCount",value:function(){for(var t=this,e=0,r=function(r){var o="",i=u.filter(t.points,function(t){return t.properties.index===r&&(o=t.properties.name,!0)});1===i.length?(n.default.debug("Station ".concat(r," found. Station name: ").concat(o)),e++):n.default.warn("Station ".concat(r," found ").concat(i.length," times."))},o=h;o<=p;o++)r(o);return e}},{key:"isOrderCorrect",value:function(){for(var t=!0,e=1;e<this.points.length;e++){var r=this.points[e].properties.index,o=this.points[e-1].properties.index;n.default.debug("Point ".concat(e-1)),null===r?n.default.debug("Not checking order for unrecognized point: ".concat(this.points[e].properties.name)):null===o?n.default.debug("Not checking order for unrecognized point: ".concat(this.points[e-1].properties.name)):this.pathCircular&&(o===h&&r===p||r===h&&o===p)?n.default.debug("Not checking order for station",h,"and",p,"when route is circular."):r<=o?(n.default.warn("Detected invalid order of stations. Station ".concat(r," is after station ").concat(o,".")),t=!1):n.default.debug("Station ".concat(r," is after station ").concat(o,"."))}return t}},{key:"areAllOnThePath",value:function(t){var e=!0;return u.forEach(this.points,function(r,o){var i=r.properties.index,a=r.properties.nearestOnLine.properties.dist;n.default.debug("Point ".concat(o)),null===i?n.default.debug("Not checking distance for: ".concat(r.properties.name)):a>t?(n.default.warn("Station ".concat(i," is too far from path. Expected maximum distance from path: ").concat(t," meter(s).")),e=!1):n.default.debug("Station ".concat(i," is on the path."))}),e}},{key:"isPathReversed",value:function(){return this.pathReversed}}]),t}();e.default=v},function(t,e,r){"use strict";function n(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){for(var e,r=0,n=1;n<t.length;n++)r+=0<(e=t[n].elevation-t[n-1].elevation)?e:0;return+r},i=function(t){for(var e,r=0,n=1;n<t.length;n++)r+=0<(e=t[n-1].elevation-t[n].elevation)?e:0;return+r},a=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gain=o(e),this.loss=i(e),this.totalChange=this.loss+this.gain,this.data=e}return function(t,e,r){e&&n(t.prototype,e),r&&n(t,r)}(t,[{key:"enrichData",value:function(t){for(var e=[],r=t/this.data.length,n=0;n<this.data.length;n++)e.push({elevation:this.data[n].elevation,distance:n*r});this.data=e}}]),t}();e.default=a},function(t,e,r){"use strict";var n=s(r(11)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(19)),i=s(r(48)),a=s(r(60)),u=s(r(59));function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.geoJson=e,this.lineString=i.default.getLineString(this.geoJson),this.points=i.default.getPoints(this.geoJson),this.isRouteVerifiable=!0,o.isEmpty(this.lineString)&&(n.default.error("No line string in route."),this.isRouteVerifiable=!1),o.isEmpty(this.points)&&(n.default.error("No points in route."),this.isRouteVerifiable=!1),this.isRouteVerifiable&&(this.stations=new u.default(this.points,this.lineString),this.path=this.stations.isPathReversed()?i.default.reverseLineString(this.lineString):this.lineString,this.numberOfPaths=i.default.getNumberOfFeatures("LineString",this.geoJson))}return function(t,e,r){e&&c(t.prototype,e),r&&c(t,r)}(t,[{key:"isVerifiable",value:function(){return this.isRouteVerifiable}},{key:"isSinglePath",value:function(){var t=o.isEqual(this.numberOfPaths,1);return t||n.default.warn("No single path defined."),n.default.debug("isSinglePath:",t,", numberOfPaths:",this.numberOfPaths),t}},{key:"areAllStationsPresent",value:function(){var t=this.stations.getCount(),e=o.isEqual(t,14);return n.default.debug("areAllStationsPresent:",e,", numberOfStations:",t),e}},{key:"areStationsOnThePath",value:function(){var t=this.stations.areAllOnThePath(100);return n.default.debug("areStationsOnThePath:",t),t}},{key:"isStationOrderCorrect",value:function(){var t=this.stations.isOrderCorrect();return n.default.debug("isStationOrderCorrect:",t),t}},{key:"getPathLength",value:function(){var t=0,e=i.default.getGoogleMapsPath(this.path);return t=google.maps.geometry.spherical.computeLength(e),t/=1e3,n.default.debug("getPathLength [km]:",t),t}},{key:"fetchPathElevationData",value:function(){var t=this;return i.default.getPathElevations(this.path).then(function(e){return n.default.debug("Path elevations:",e),t.pathElevation=new a.default(e),t.pathElevation}).catch(function(t){throw new Error(t)})}},{key:"getPathElevation",value:function(){return n.default.debug("getPathElevation:",this.pathElevation),this.pathElevation}}]),t}();e.default=f},function(t,e,r){var n=r(25),o=r(5),i=r(23),a=r(8);t.exports=function(t,e,r){if(!a(r))return!1;var u=typeof e;return!!("number"==u?o(r)&&i(e,r.length):"string"==u&&e in r)&&n(r[e],t)}},function(t,e){var r=800,n=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var a=o(),u=n-(a-i);if(i=a,u>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){var n=r(2),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,r){var n=r(65),o=r(64),i=r(3),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=a},function(t,e,r){var n=r(66),o=r(63)(n);t.exports=o},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(68),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=r(s),n(t,this,c)}}},function(t,e,r){var n=r(3),o=r(69),i=r(67);t.exports=function(t,e){return i(o(t,e,n),t+"")}},function(t,e,r){var n=r(4);t.exports=function(t,e){if(t!==e){var r=void 0!==t,o=null===t,i=t==t,a=n(t),u=void 0!==e,s=null===e,c=e==e,f=n(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!r&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&r&&i&&!o&&!a||s&&r&&i||!u&&i||!c)return-1}return 0}},function(t,e,r){var n=r(71);t.exports=function(t,e,r){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=r.length;++o<u;){var c=n(i[o],a[o]);if(c)return o>=s?c:c*("desc"==r[o]?-1:1)}return t.index-e.index}},function(t,e){t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}},function(t,e,r){var n=r(20),o=r(6),i=r(31),a=r(73),u=r(40),s=r(72),c=r(3);t.exports=function(t,e,r){var f=-1;e=n(e.length?e:[c],u(o));var l=i(t,function(t,r,o){return{criteria:n(e,function(e){return e(t)}),index:++f,value:t}});return a(l,function(t,e){return s(t,e,r)})}},function(t,e,r){var n=r(9),o=r(18),i=r(0),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e,r){var n=r(37),o=r(75);t.exports=function t(e,r,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];r>0&&i(f)?r>1?t(f,r-1,i,a,u):n(u,f):a||(u[u.length]=f)}return u}},function(t,e,r){var n=r(76),o=r(74),i=r(70),a=r(62),u=i(function(t,e){if(null==t)return[];var r=e.length;return r>1&&a(t,e[0],e[1])?e=[]:r>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,n(e,1),[])});t.exports=u},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,r){var n=r(4);t.exports=function(t,e,r){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!n(u):r(u,s)))var s=u,c=a}return c}},function(t,e,r){var n=r(79),o=r(78),i=r(3);t.exports=function(t){return t&&t.length?n(t,i,o):void 0}},function(t,e,r){var n=r(20),o=r(6),i=r(31),a=r(0);t.exports=function(t,e){return(a(t)?n:i)(t,o(e,3))}},function(t,e,r){var n=r(3);t.exports=function(t){return"function"==typeof t?t:n}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},function(t,e,r){var n=r(83),o=r(22),i=r(82),a=r(0);t.exports=function(t,e){return(a(t)?n:o)(t,i(e))}},function(t,e,r){var n=r(8),o=r(4),i=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var r=s.test(t);return r||c.test(t)?f(t.slice(2),r?2:8):u.test(t)?i:+t}},function(t,e,r){var n=r(85),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=n(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},function(t,e,r){var n=r(86);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e){t.exports=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,r){var n=r(88),o=r(6),i=r(87),a=Math.max;t.exports=function(t,e,r){var u=null==t?0:t.length;if(!u)return-1;var s=null==r?0:i(r);return s<0&&(s=a(u+s,0)),n(t,o(e,3),s)}},function(t,e,r){var n=r(6),o=r(5),i=r(13);t.exports=function(t){return function(e,r,a){var u=Object(e);if(!o(e)){var s=n(r,3);e=i(e),r=function(t){return s(u[t],t,u)}}var c=t(e,r,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,r){var n=r(90)(r(89));t.exports=n},function(t,e,r){var n=r(33);t.exports=function(t){return function(e){return n(e,t)}}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,r){var n=r(93),o=r(92),i=r(21),a=r(12);t.exports=function(t){return i(t)?n(a(t)):o(t)}},function(t,e,r){var n=r(32),o=r(18),i=r(0),a=r(23),u=r(29),s=r(12);t.exports=function(t,e,r){for(var c=-1,f=(e=n(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&r(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(96),o=r(95);t.exports=function(t,e){return null!=t&&o(t,e,n)}},function(t,e,r){var n=r(9),o=r(20),i=r(0),a=r(4),u=1/0,s=n?n.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-u?"-0":r}},function(t,e,r){var n=r(98);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(24),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},function(t,e,r){var n=r(100),o=500;t.exports=function(t){var e=n(t,function(t){return r.size===o&&r.clear(),t}),r=e.cache;return e}},function(t,e,r){var n=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r(101)(function(t){var e=[];return n.test(t)&&e.push(""),t.replace(o,function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)}),e});t.exports=a},function(t,e,r){var n=r(33);t.exports=function(t,e,r){var o=null==t?void 0:n(t,e);return void 0===o?r:o}},function(t,e,r){var n=r(26),o=r(103),i=r(97),a=r(21),u=r(35),s=r(34),c=r(12),f=1,l=2;t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(r){var a=o(r,t);return void 0===a&&a===e?i(r,t):n(e,a,f|l)}}},function(t,e,r){var n=r(35),o=r(13);t.exports=function(t){for(var e=o(t),r=e.length;r--;){var i=e[r],a=t[i];e[r]=[i,a,n(a)]}return e}},function(t,e,r){var n=r(39),o=r(26),i=1,a=2;t.exports=function(t,e,r,u){var s=r.length,c=s,f=!u;if(null==t)return!c;for(t=Object(t);s--;){var l=r[s];if(f&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<c;){var h=(l=r[s])[0],p=t[h],d=l[1];if(f&&l[2]){if(void 0===p&&!(h in t))return!1}else{var v=new n;if(u)var g=u(p,d,h,t,e,v);if(!(void 0===g?o(d,p,i|a,u,v):g))return!1}}return!0}},function(t,e,r){var n=r(106),o=r(105),i=r(34);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},function(t,e,r){var n=r(5);t.exports=function(t,e){return function(r,o){if(null==r)return r;if(!n(r))return t(r,o);for(var i=r.length,a=e?i:-1,u=Object(r);(e?a--:++a<i)&&!1!==o(u[a],a,u););return r}}},function(t,e){t.exports=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===r(i[s],s,i))break}return e}}},function(t,e,r){var n=r(109)();t.exports=n},function(t,e,r){var n=r(110),o=r(13);t.exports=function(t,e){return t&&n(t,e,o)}},function(t,e,r){var n=r(22);t.exports=function(t,e){var r=[];return n(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}},function(t,e,r){var n=r(36),o=r(112),i=r(6),a=r(0);t.exports=function(t,e){return(a(t)?n:o)(t,i(e,3))}},function(t,e){t.exports=function(t){return null===t}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(115),o=r(18),i=r(0),a=r(28),u=r(23),s=r(27),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),f=!r&&o(t),l=!r&&!f&&a(t),h=!r&&!f&&!l&&s(t),p=r||f||l||h,d=p?n(t.length,String):[],v=d.length;for(var g in t)!e&&!c.call(t,g)||p&&("length"==g||l&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||d.push(g);return d}},function(t,e){t.exports=function(){return[]}},function(t,e,r){var n=r(36),o=r(117),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),n(a(t),function(e){return i.call(t,e)}))}:o;t.exports=u},function(t,e,r){var n=r(37),o=r(0);t.exports=function(t,e,r){var i=e(t);return o(t)?i:n(i,r(t))}},function(t,e,r){var n=r(119),o=r(118),i=r(13);t.exports=function(t){return n(t,i,o)}},function(t,e,r){var n=r(120),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,a,u,s){var c=r&o,f=n(t),l=f.length;if(l!=n(e).length&&!c)return!1;for(var h=l;h--;){var p=f[h];if(!(c?p in e:i.call(e,p)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var v=!0;s.set(t,e),s.set(e,t);for(var g=c;++h<l;){var y=t[p=f[h]],m=e[p];if(a)var b=c?a(m,y,p,e,t,s):a(y,m,p,t,e,s);if(!(void 0===b?y===m||u(y,m,r,a,s):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var w=t.constructor,x=e.constructor;w!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(v=!1)}return s.delete(t),s.delete(e),v}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}},function(t,e,r){var n=r(1).Uint8Array;t.exports=n},function(t,e,r){var n=r(9),o=r(124),i=r(25),a=r(38),u=r(123),s=r(122),c=1,f=2,l="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",g="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",E=n?n.prototype:void 0,P=E?E.valueOf:void 0;t.exports=function(t,e,r,n,E,_,j){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!_(new o(t),new o(e)));case l:case h:case v:return i(+t,+e);case p:return t.name==e.name&&t.message==e.message;case g:case m:return t==e+"";case d:var M=u;case y:var O=n&c;if(M||(M=s),t.size!=e.size&&!O)return!1;var S=j.get(t);if(S)return S==e;n|=f,j.set(t,e);var k=a(M(t),M(e),n,E,_,j);return j.delete(t),k;case b:if(P)return P.call(t)==P.call(e)}return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){var r="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,r),this}},function(t,e,r){var n=r(24),o=r(129),i=r(128);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e,r){var n=r(14);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},function(t,e,r){var n=r(14);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(14);t.exports=function(t){return n(this,t).get(t)}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(14);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e,r){var n=r(15),o="__lodash_hash_undefined__";t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?o:e,this}},function(t,e,r){var n=r(15),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},function(t,e,r){var n=r(15),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===o?void 0:r}return i.call(e,t)?e[t]:void 0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(15);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e,r){var n=r(140),o=r(139),i=r(138),a=r(137),u=r(136);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,r){var n=r(141),o=r(17),i=r(30);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(t,e,r){var n=r(17),o=r(30),i=r(24),a=200;t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var u=r.__data__;if(!o||u.length<a-1)return u.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(u)}return r.set(t,e),this.size=r.size,this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},function(t,e,r){var n=r(17);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e,r){var n=r(16);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},function(t,e,r){var n=r(16);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(16);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(16),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():o.call(e,r,1),--this.size,0))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(39),o=r(38),i=r(125),a=r(121),u=r(45),s=r(0),c=r(28),f=r(27),l=1,h="[object Arguments]",p="[object Array]",d="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,g,y,m){var b=s(t),w=s(e),x=b?p:u(t),E=w?p:u(e),P=(x=x==h?d:x)==d,_=(E=E==h?d:E)==d,j=x==E;if(j&&c(t)){if(!c(e))return!1;b=!0,P=!1}if(j&&!P)return m||(m=new n),b||f(t)?o(t,e,r,g,y,m):i(t,e,x,r,g,y,m);if(!(r&l)){var M=P&&v.call(t,"__wrapped__"),O=_&&v.call(e,"__wrapped__");if(M||O){var S=M?t.value():t,k=O?e.value():e;return m||(m=new n),y(S,k,r,g,m)}}return!!j&&(m||(m=new n),a(t,e,r,g,y,m))}},function(t,e,r){var n=r(26);t.exports=function(t,e){return n(t,e)}},function(t,e,r){(function(t){var n=r(43),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&n.process,u=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(this,r(41)(t))},function(t,e,r){var n=r(10),o=r(29),i=r(7),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(10),o=r(7),i="[object Arguments]";t.exports=function(t){return o(t)&&n(t)==i}},function(t,e,r){var n=r(2)(r(1),"WeakMap");t.exports=n},function(t,e,r){var n=r(2)(r(1),"Set");t.exports=n},function(t,e,r){var n=r(2)(r(1),"Promise");t.exports=n},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,r){var n=r(1)["__core-js_shared__"];t.exports=n},function(t,e,r){var n,o=r(163),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(9),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[u]=r:delete t[u]),o}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(44),o=r(164),i=r(8),a=r(42),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?h:u).test(a(t))}},function(t,e,r){var n=r(2)(r(1),"DataView");t.exports=n},function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}},function(t,e,r){var n=r(170)(Object.keys,Object);t.exports=n},function(t,e,r){var n=r(47),o=r(45),i=r(18),a=r(0),u=r(5),s=r(28),c=r(46),f=r(27),l="[object Map]",h="[object Set]",p=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if(e==l||e==h)return!t.size;if(c(t))return!n(t).length;for(var r in t)if(p.call(t,r))return!1;return!0}},function(t,e){},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||f||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){(function(n){var o=function(){"use strict";var t,o=/\s*/g,i=/^\s*|\s*$/g,a=/\s+/;function u(t){if(!t||!t.length)return 0;for(var e=0,r=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return r}function s(t,e){return t.getElementsByTagName(e)}function c(t,e){return t.getAttribute(e)}function f(t,e){return parseFloat(c(t,e))}function l(t,e){var r=s(t,e);return r.length?r[0]:null}function h(t){for(var e=0,r=[];e<t.length;e++)r[e]=parseFloat(t[e]);return r}function p(t){var e;return t&&(e=t).normalize&&e.normalize(),t&&t.textContent||""}function d(t,e){var r,n,o={};for(n=0;n<e.length;n++)(r=l(t,e[n]))&&(o[e[n]]=p(r));return o}function v(t,e){for(var r in e)t[r]=e[r]}function g(t){return h(t.replace(o,"").split(","))}function y(t){for(var e=t.replace(i,"").split(a),r=[],n=0;n<e.length;n++)r.push(g(e[n]));return r}function m(t){var e,r=[f(t,"lon"),f(t,"lat")],n=l(t,"ele"),o=l(t,"gpxtpx:hr")||l(t,"hr"),i=l(t,"time");return n&&(e=parseFloat(p(n)),isNaN(e)||r.push(e)),{coordinates:r,time:i?p(i):null,heartRate:o?parseFloat(p(o)):null}}function b(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return"undefined"!=typeof XMLSerializer?t=new XMLSerializer:"object"!=typeof e||"object"!=typeof n||n.browser||(t=new(r(173).XMLSerializer)),{kml:function(t){for(var e={type:"FeatureCollection",features:[]},r={},n={},o={},i=["Polygon","LineString","Point","Track","gx:Track"],a=s(t,"Placemark"),f=s(t,"Style"),d=s(t,"StyleMap"),v=0;v<f.length;v++){var m=u(b(f[v])).toString(16);r["#"+c(f[v],"id")]=m,n[m]=f[v]}for(var w=0;w<d.length;w++){r["#"+c(d[w],"id")]=u(b(d[w])).toString(16);for(var x=s(d[w],"Pair"),E={},P=0;P<x.length;P++)E[p(l(x[P],"key"))]=p(l(x[P],"styleUrl"));o["#"+c(d[w],"id")]=E}for(var _=0;_<a.length;_++)e.features=e.features.concat(O(a[_]));function j(t){var e,r;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(r=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(r)?void 0:r]}function M(t){var e=s(t,"coord"),r=[],n=[];0===e.length&&(e=s(t,"gx:coord"));for(var o=0;o<e.length;o++)r.push(h(p(e[o]).split(" ")));for(var i=s(t,"when"),a=0;a<i.length;a++)n.push(p(i[a]));return{coords:r,times:n}}function O(t){var e,a=function t(e){var r,n,o,a,u,c=[],f=[];if(l(e,"MultiGeometry"))return t(l(e,"MultiGeometry"));if(l(e,"MultiTrack"))return t(l(e,"MultiTrack"));if(l(e,"gx:MultiTrack"))return t(l(e,"gx:MultiTrack"));for(o=0;o<i.length;o++)if(n=s(e,i[o]))for(a=0;a<n.length;a++)if(r=n[a],"Point"===i[o])c.push({type:"Point",coordinates:g(p(l(r,"coordinates")))});else if("LineString"===i[o])c.push({type:"LineString",coordinates:y(p(l(r,"coordinates")))});else if("Polygon"===i[o]){var h=s(r,"LinearRing"),d=[];for(u=0;u<h.length;u++)d.push(y(p(l(h[u],"coordinates"))));c.push({type:"Polygon",coordinates:d})}else if("Track"===i[o]||"gx:Track"===i[o]){var v=M(r);c.push({type:"LineString",coordinates:v.coords}),v.times.length&&f.push(v.times)}return{geoms:c,coordTimes:f}}(t),u={},f=p(l(t,"name")),h=p(l(t,"styleUrl")),d=p(l(t,"description")),v=l(t,"TimeSpan"),m=l(t,"TimeStamp"),b=l(t,"ExtendedData"),w=l(t,"LineStyle"),x=l(t,"PolyStyle"),E=l(t,"visibility");if(!a.geoms.length)return[];if(f&&(u.name=f),h){"#"!==h[0]&&(h="#"+h),u.styleUrl=h,r[h]&&(u.styleHash=r[h]),o[h]&&(u.styleMapHash=o[h],u.styleHash=r[o[h].normal]);var P=n[u.styleHash];P&&(w||(w=l(P,"LineStyle")),x||(x=l(P,"PolyStyle")))}if(d&&(u.description=d),v){var _=p(l(v,"begin")),O=p(l(v,"end"));u.timespan={begin:_,end:O}}if(m&&(u.timestamp=p(l(m,"when"))),w){var S=j(p(l(w,"color"))),k=S[0],C=S[1],L=parseFloat(p(l(w,"width")));k&&(u.stroke=k),isNaN(C)||(u["stroke-opacity"]=C),isNaN(L)||(u["stroke-width"]=L)}if(x){var A=j(p(l(x,"color"))),N=A[0],T=A[1],F=p(l(x,"fill")),I=p(l(x,"outline"));N&&(u.fill=N),isNaN(T)||(u["fill-opacity"]=T),F&&(u["fill-opacity"]="1"===F?u["fill-opacity"]||1:0),I&&(u["stroke-opacity"]="1"===I?u["stroke-opacity"]||1:0)}if(b){var R=s(b,"Data"),B=s(b,"SimpleData");for(e=0;e<R.length;e++)u[R[e].getAttribute("name")]=p(l(R[e],"value"));for(e=0;e<B.length;e++)u[B[e].getAttribute("name")]=p(B[e])}E&&(u.visibility=p(E)),a.coordTimes.length&&(u.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var X={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:u};return c(t,"id")&&(X.id=c(t,"id")),[X]}return e},gpx:function(t){var e,r,n=s(t,"trk"),o=s(t,"rte"),i=s(t,"wpt"),a={type:"FeatureCollection",features:[]};for(e=0;e<n.length;e++)(r=f(n[e]))&&a.features.push(r);for(e=0;e<o.length;e++)(r=l(o[e]))&&a.features.push(r);for(e=0;e<i.length;e++)a.features.push(h(i[e]));function u(t,e){var r=s(t,e),n=[],o=[],i=[],a=r.length;if(a<2)return{};for(var u=0;u<a;u++){var c=m(r[u]);n.push(c.coordinates),c.time&&o.push(c.time),c.heartRate&&i.push(c.heartRate)}return{line:n,times:o,heartRates:i}}function f(t){for(var e,r=s(t,"trkseg"),n=[],o=[],i=[],a=0;a<r.length;a++)(e=u(r[a],"trkpt"))&&(e.line&&n.push(e.line),e.times&&e.times.length&&o.push(e.times),e.heartRates&&e.heartRates.length&&i.push(e.heartRates));if(0!==n.length){var c=p(t);return o.length&&(c.coordTimes=1===n.length?o[0]:o),i.length&&(c.heartRates=1===n.length?i[0]:i),{type:"Feature",properties:c,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function l(t){var e=u(t,"rtept");if(e.line)return{type:"Feature",properties:p(t),geometry:{type:"LineString",coordinates:e.line}}}function h(t){var e=p(t);return v(e,d(t,["sym","type"])),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:m(t).coordinates}}}function p(t){var e,r;e=d(t,["name","cmt","desc","time","keywords"]),(r=s(t,"link")).length&&(e.links=[]);for(var n,o=0;o<r.length;o++)v(n={href:c(r[o],"href")},d(r[o],["text","type"])),e.links.push(n);return e}return a}}}();t.exports=o}).call(this,r(174))},function(t,e,r){"use strict";var n=s(r(11)),o=s(r(48)),i=s(r(61)),a=s(r(54)),u=s(r(53));function s(t){return t&&t.__esModule?t:{default:t}}var c=30,f=500;n.default.setLevel("warn"),window.setLogLevel=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"debug";return n.default.setLevel(t)},$("button#verifyRoute").bind("click",function(){if(window.google&&window.google.maps){var t=new a.default,e=new u.default;e.resetAll(),e.addLoaderToButton(),o.default.getRoute(t.routeUrl).done(function(r){var a=o.default.getGeoJSON(r),u=new i.default(a);if(!u.isVerifiable())return n.default.error("Route is unverifiable."),void e.resetAll(!1);var s=u.isSinglePath();e.updateSinglePath(s);var l=u.getPathLength();e.updatePathLength(!0,l);var h=u.areAllStationsPresent();e.updateNumberOfStations(h);var p=u.isStationOrderCorrect();e.updateStationsOrder(p);var d=u.areStationsOnThePath();e.updateStationsOnPath(d),u.fetchPathElevationData().then(function(){var r=u.getPathElevation();r.enrichData(l),e.updateElevationGain(!0,r.gain);var i=l>=40||r.gain>f&&l>=c;e.updateRouteType(i),e.updateElevationLoss(!0,r.loss),e.updateElevationTotalChange(!0,r.totalChange),e.drawElevationChart(r),o.default.getRouteParameters(t.routeParamsUrl).then(function(a){var u=l-1<=a.length&&a.length<=l+1,c=r.gain-50<=a.ascent&&a.ascent<=r.gain+50,f=a.type===(i?0:1),v=u&&c&&f;n.default.debug("isLengthConsistent:",u,", isElevationGainConsistent:",c,", isRouteTypeConsistent:",f),e.updateDataConsistency(v),s&&h&&p&&d&&v?(n.default.info("Route verification success. Approving..."),o.default.approveRoute(t.routeApproveUrl).then(function(){n.default.info("Route approved.");var t=setTimeout(function(){window.location.reload(1)},5e3);$("div#pageReloadModal").on("hide.bs.modal",function(){clearTimeout(t)}),$("div#pageReloadModal").modal()}).catch(function(t){n.default.error("Route approval error.",t)})):n.default.info("Route verification failed. Cannot be approved.")}).catch(function(t){n.default.error("Route parameters data fetching error.",t)})}).catch(function(t){n.default.error("Path elevation data fetching error.",t),e.updateElevationGain(!1,0),e.updateElevationLoss(!1,0),e.updateElevationTotalChange(!1,0),e.updateDataConsistency(!1)})}).fail(function(t,e){n.default.error("Route fetching error. Status:",e)}).always(function(){e.removeLoaderFromButton()})}else n.default.error("Google Maps API is not loaded.")})}]);
//# sourceMappingURL=edk-route-verifier.min.js.map