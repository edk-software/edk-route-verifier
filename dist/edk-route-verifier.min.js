!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=183)}([function(e,t,r){var n,o;!function(i,a){"use strict";void 0===(o="function"==typeof(n=function(){var e=function(){},t="undefined",r=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(t,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function i(r,i,a){return function(r){"debug"===r&&(r="log");return typeof console!==t&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):e)}(r)||function(e,r,n){return function(){typeof console!==t&&(o.call(this,r,n),this[e].apply(this,arguments))}}.apply(this,arguments)}function a(e,n,a){var u,s=this,l="loglevel";function c(){var e;if(typeof window!==t){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}e&&(l+=":"+e),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=a||i,s.getLevel=function(){return u},s.setLevel=function(n,i){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(u=n,!1!==i&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window===t)return;try{return void(window.localStorage[l]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(e){}}(n),o.call(s,n,e),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){c()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=c();null==f&&(f=null==n?"WARN":n),s.setLevel(f,!1)}var u=new a,s={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new a(e,u.getLevel(),u.methodFactory)),t};var l=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=l),u},u.getLoggers=function(){return s},u})?n.call(t,r,t,e):n)||(e.exports=o)}()},function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function o(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function i(e,t,r){void 0===r&&(r={});for(var o=0,i=e;o<i.length;o++){var a=i[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function a(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function u(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function s(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function c(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function f(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function h(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function g(e){return 180*(e%(2*Math.PI))/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return o(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=o,t.points=function(e,t,r){return void 0===r&&(r={}),u(e.map(function(e){return o(e,t)}),r)},t.polygon=i,t.polygons=function(e,t,r){return void 0===r&&(r={}),u(e.map(function(e){return i(e,t)}),r)},t.lineString=a,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),u(e.map(function(e){return a(e,t)}),r)},t.featureCollection=u,t.multiLineString=s,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=f,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return g(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=g,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return f(h(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=t.areaFactors[r];if(!o)throw new Error("invalid original units");var i=t.areaFactors[n];if(!i)throw new Error("invalid final units");return e/o*i},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!p(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(39),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&n.isNumber(t[0])&&n.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,o=e.features;n<o.length;n++){var i=o[n];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!i.geometry||i.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+i.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,r){var n=r(69),o=r(75);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(38),o=r(23);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,r){var n=r(9),o=r(12),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==i}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(10),o=r(71),i=r(72),a="[object Null]",u="[object Undefined]",s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?u:a:s&&s in Object(e)?o(e):i(e)}},function(e,t,r){var n=r(3).Symbol;e.exports=n},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(127),o=r(130),i=r(8),a=r(2),u=r(139);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):n(e):u(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=r(1);t.default=function(e,t,r){void 0===r&&(r={});var i=n.getCoord(e),a=n.getCoord(t),u=o.degreesToRadians(a[1]-i[1]),s=o.degreesToRadians(a[0]-i[0]),l=o.degreesToRadians(i[1]),c=o.degreesToRadians(a[1]),f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(c);return o.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}},function(e,t,r){var n=r(79),o=r(12),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,r){var n=r(84),o=r(85),i=r(86),a=r(87),u=r(88);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,r){var n=r(27);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(5)(Object,"create");e.exports=n},function(e,t,r){var n=r(102);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(120),o=r(35),i=r(6);e.exports=function(e){return i(e)?n(e):o(e)}},function(e,t,r){var n=r(7),o=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t,r){var n=r(5)(r(3),"Map");e.exports=n},function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,r){(function(e){var n=r(3),o=r(80),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===i?n.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;e.exports=s}).call(this,r(41)(e))},function(e,t,r){var n=r(81),o=r(42),i=r(82),a=i&&i.isTypedArray,u=a?o(a):n;e.exports=u},function(e,t,r){var n=r(83),o=r(12);e.exports=function e(t,r,i,a,u){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,a,e,u))}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(94),o=r(101),i=r(103),a=r(104),u=r(105);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?r:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(123),o=r(126)(n);e.exports=o},function(e,t,r){var n=r(52);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},function(e,t,r){var n=r(2),o=r(7),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(35),o=r(37),i=r(15),a=r(2),u=r(6),s=r(24),l=r(36),c=r(25),f="[object Map]",h="[object Set]",g=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||c(e)||i(e)))return!e.length;var t=o(e);if(t==f||t==h)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(g.call(e,r))return!1;return!0}},function(e,t,r){var n=r(36),o=r(66),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(68),o=r(22),i=r(76),a=r(77),u=r(78),s=r(9),l=r(40),c=l(n),f=l(o),h=l(i),g=l(a),p=l(u),d=s;(n&&"[object DataView]"!=d(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=d(new o)||i&&"[object Promise]"!=d(i.resolve())||a&&"[object Set]"!=d(new a)||u&&"[object WeakMap]"!=d(new u))&&(d=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case c:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case g:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=d},function(e,t,r){var n=r(9),o=r(11),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==a||t==u||t==i||t==s}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(70))},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){var n=r(26);e.exports=function(e,t){return n(e,t)}},function(e,t,r){var n=r(16),o=r(89),i=r(90),a=r(91),u=r(92),s=r(93);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=u,l.prototype.set=s,e.exports=l},function(e,t,r){var n=r(106),o=r(109),i=r(110),a=1,u=2;e.exports=function(e,t,r,s,l,c){var f=r&a,h=e.length,g=t.length;if(h!=g&&!(f&&g>h))return!1;var p=c.get(e);if(p&&c.get(t))return p==t;var d=-1,v=!0,y=r&u?new n:void 0;for(c.set(e,t),c.set(t,e);++d<h;){var m=e[d],b=t[d];if(s)var w=f?s(b,m,d,t,e,c):s(m,b,d,e,t,c);if(void 0!==w){if(w)continue;v=!1;break}if(y){if(!o(t,function(e,t){if(!i(y,t)&&(m===e||l(m,e,r,s,c)))return y.push(t)})){v=!1;break}}else if(m!==b&&!l(m,b,r,s,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},function(e,t){e.exports=function(e){return null===e}},function(e,t,r){var n=r(47),o=r(122),i=r(13),a=r(2);e.exports=function(e,t){return(a(e)?n:o)(e,i(t,3))}},function(e,t,r){var n=r(11);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},function(e,t,r){var n=r(53),o=r(21);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},function(e,t,r){var n=r(2),o=r(32),i=r(131),a=r(134);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(a(e))}},function(e,t,r){var n=r(142)(r(143));e.exports=n},function(e,t,r){var n=r(148),o=r(30),i=r(149),a=r(2);e.exports=function(e,t){return(a(e)?n:o)(e,i(t))}},function(e,t,r){var n=r(33),o=r(13),i=r(57),a=r(2);e.exports=function(e,t){return(a(e)?n:i)(e,o(t,3))}},function(e,t,r){var n=r(30),o=r(6);e.exports=function(e,t){var r=-1,i=o(e)?Array(e.length):[];return n(e,function(e,n,o){i[++r]=t(e,n,o)}),i}},function(e,t,r){var n=r(150),o=r(151),i=r(8);e.exports=function(e){return e&&e.length?n(e,i,o):void 0}},function(e,t,r){var n=r(152),o=r(154),i=r(158),a=r(166),u=i(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])});e.exports=u},function(e,t,r){(function(t){var n=function(){"use strict";var e,n=/\s*/g,o=/^\s*|\s*$/g,i=/\s+/;function a(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function u(e,t){return e.getElementsByTagName(t)}function s(e,t){return e.getAttribute(t)}function l(e,t){return parseFloat(s(e,t))}function c(e,t){var r=u(e,t);return r.length?r[0]:null}function f(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function h(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function g(e,t){var r,n,o={};for(n=0;n<t.length;n++)(r=c(e,t[n]))&&(o[t[n]]=h(r));return o}function p(e,t){for(var r in t)e[r]=t[r]}function d(e){return f(e.replace(n,"").split(","))}function v(e){for(var t=e.replace(o,"").split(i),r=[],n=0;n<t.length;n++)r.push(d(t[n]));return r}function y(e){var t,r=[l(e,"lon"),l(e,"lat")],n=c(e,"ele"),o=c(e,"gpxtpx:hr")||c(e,"hr"),i=c(e,"time");return n&&(t=parseFloat(h(n)),isNaN(t)||r.push(t)),{coordinates:r,time:i?h(i):null,heartRate:o?parseFloat(h(o)):null}}function m(t){return void 0!==t.xml?t.xml:e.serializeToString(t)}return"undefined"!=typeof XMLSerializer?e=new XMLSerializer:"object"!=typeof t||t.browser||(e=new(r(65).XMLSerializer)),{kml:function(e){for(var t={type:"FeatureCollection",features:[]},r={},n={},o={},i=["Polygon","LineString","Point","Track","gx:Track"],l=u(e,"Placemark"),g=u(e,"Style"),p=u(e,"StyleMap"),y=0;y<g.length;y++){var b=a(m(g[y])).toString(16);r["#"+s(g[y],"id")]=b,n[b]=g[y]}for(var w=0;w<p.length;w++){r["#"+s(p[w],"id")]=a(m(p[w])).toString(16);for(var P=u(p[w],"Pair"),x={},M=0;M<P.length;M++)x[h(c(P[M],"key"))]=h(c(P[M],"styleUrl"));o["#"+s(p[w],"id")]=x}for(var S=0;S<l.length;S++)t.features=t.features.concat(k(l[S]));function E(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function L(e){var t=u(e,"coord"),r=[],n=[];0===t.length&&(t=u(e,"gx:coord"));for(var o=0;o<t.length;o++)r.push(f(h(t[o]).split(" ")));for(var i=u(e,"when"),a=0;a<i.length;a++)n.push(h(i[a]));return{coords:r,times:n}}function k(e){var t,a=function e(t){var r,n,o,a,s,l=[],f=[];if(c(t,"MultiGeometry"))return e(c(t,"MultiGeometry"));if(c(t,"MultiTrack"))return e(c(t,"MultiTrack"));if(c(t,"gx:MultiTrack"))return e(c(t,"gx:MultiTrack"));for(o=0;o<i.length;o++)if(n=u(t,i[o]))for(a=0;a<n.length;a++)if(r=n[a],"Point"===i[o])l.push({type:"Point",coordinates:d(h(c(r,"coordinates")))});else if("LineString"===i[o])l.push({type:"LineString",coordinates:v(h(c(r,"coordinates")))});else if("Polygon"===i[o]){var g=u(r,"LinearRing"),p=[];for(s=0;s<g.length;s++)p.push(v(h(c(g[s],"coordinates"))));l.push({type:"Polygon",coordinates:p})}else if("Track"===i[o]||"gx:Track"===i[o]){var y=L(r);l.push({type:"LineString",coordinates:y.coords}),y.times.length&&f.push(y.times)}return{geoms:l,coordTimes:f}}(e),l={},f=h(c(e,"name")),g=h(c(e,"styleUrl")),p=h(c(e,"description")),y=c(e,"TimeSpan"),m=c(e,"TimeStamp"),b=c(e,"ExtendedData"),w=c(e,"LineStyle"),P=c(e,"PolyStyle"),x=c(e,"visibility");if(!a.geoms.length)return[];if(f&&(l.name=f),g){"#"!==g[0]&&(g="#"+g),l.styleUrl=g,r[g]&&(l.styleHash=r[g]),o[g]&&(l.styleMapHash=o[g],l.styleHash=r[o[g].normal]);var M=n[l.styleHash];M&&(w||(w=c(M,"LineStyle")),P||(P=c(M,"PolyStyle")))}if(p&&(l.description=p),y){var S=h(c(y,"begin")),k=h(c(y,"end"));l.timespan={begin:S,end:k}}if(m&&(l.timestamp=h(c(m,"when"))),w){var _=E(h(c(w,"color"))),j=_[0],O=_[1],F=parseFloat(h(c(w,"width")));j&&(l.stroke=j),isNaN(O)||(l["stroke-opacity"]=O),isNaN(F)||(l["stroke-width"]=F)}if(P){var C=E(h(c(P,"color"))),A=C[0],I=C[1],R=h(c(P,"fill")),T=h(c(P,"outline"));A&&(l.fill=A),isNaN(I)||(l["fill-opacity"]=I),R&&(l["fill-opacity"]="1"===R?l["fill-opacity"]||1:0),T&&(l["stroke-opacity"]="1"===T?l["stroke-opacity"]||1:0)}if(b){var G=u(b,"Data"),N=u(b,"SimpleData");for(t=0;t<G.length;t++)l[G[t].getAttribute("name")]=h(c(G[t],"value"));for(t=0;t<N.length;t++)l[N[t].getAttribute("name")]=h(N[t])}x&&(l.visibility=h(x)),a.coordTimes.length&&(l.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var B={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:l};return s(e,"id")&&(B.id=s(e,"id")),[B]}return t},gpx:function(e){var t,r,n=u(e,"trk"),o=u(e,"rte"),i=u(e,"wpt"),a={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(r=c(n[t]))&&a.features.push(r);for(t=0;t<o.length;t++)(r=f(o[t]))&&a.features.push(r);for(t=0;t<i.length;t++)a.features.push(h(i[t]));function l(e,t){var r=u(e,t),n=[],o=[],i=[],a=r.length;if(a<2)return{};for(var s=0;s<a;s++){var l=y(r[s]);n.push(l.coordinates),l.time&&o.push(l.time),l.heartRate&&i.push(l.heartRate)}return{line:n,times:o,heartRates:i}}function c(e){for(var t,r=u(e,"trkseg"),n=[],o=[],i=[],a=0;a<r.length;a++)(t=l(r[a],"trkpt"))&&(t.line&&n.push(t.line),t.times&&t.times.length&&o.push(t.times),t.heartRates&&t.heartRates.length&&i.push(t.heartRates));if(0!==n.length){var s=d(e);return o.length&&(s.coordTimes=1===n.length?o[0]:o),i.length&&(s.heartRates=1===n.length?i[0]:i),{type:"Feature",properties:s,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function f(e){var t=l(e,"rtept");if(t.line)return{type:"Feature",properties:d(e),geometry:{type:"LineString",coordinates:t.line}}}function h(e){var t=d(e);return p(t,g(e,["sym","type"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:y(e).coordinates}}}function d(e){var t,r;t=g(e,["name","cmt","desc","time","keywords"]),(r=u(e,"link")).length&&(t.links=[]);for(var n,o=0;o<r.length;o++)p(n={href:s(r[o],"href")},g(r[o],["text","type"])),t.links.push(n);return t}return a}}}();e.exports=n}).call(this,r(64))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(14)),i=r(167);t.default=function(e,t){return void 0===t&&(t={}),i.segmentReduce(e,function(e,r){var n=r.geometry.coordinates;return e+o.default(n[0],n[1],t)},0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(168),o=r(14),i=r(169),a=r(170),u=r(180),s=r(1),l=r(4);t.default=function(e,t,r){void 0===r&&(r={});var c=s.point([1/0,1/0],{dist:1/0}),f=0;return u.flattenEach(e,function(e){for(var u=l.getCoords(e),h=0;h<u.length-1;h++){var g=s.point(u[h]);g.properties.dist=o.default(t,g,r);var p=s.point(u[h+1]);p.properties.dist=o.default(t,p,r);var d=o.default(g,p,r),v=Math.max(g.properties.dist,p.properties.dist),y=n.default(g,p),m=i.default(t,v,y+90,r),b=i.default(t,v,y-90,r),w=a.default(s.lineString([m.geometry.coordinates,b.geometry.coordinates]),s.lineString([g.geometry.coordinates,p.geometry.coordinates])),P=null;w.features.length>0&&((P=w.features[0]).properties.dist=o.default(t,P,r),P.properties.location=f+o.default(g,P,r)),g.properties.dist<c.properties.dist&&((c=g).properties.index=h,c.properties.location=f),p.properties.dist<c.properties.dist&&((c=p).properties.index=h+1,c.properties.location=f+d),P&&P.properties.dist<c.properties.dist&&((c=P).properties.index=h),f+=d}}),c}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(14)),i=r(1),a=r(4),u=r(181),s=n(r(182));function l(e,t){return e[0]*t[0]+e[1]*t[1]}function c(e,t,r){return"planar"===r.method?s.default(e,t,r):o.default(e,t,r)}t.default=function(e,t,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=i.point(e):"Point"===e.type?e=i.feature(e):a.featureOf(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=i.lineString(t):"LineString"===t.type?t=i.feature(t):a.featureOf(t,"LineString","line");var n=1/0,o=e.geometry.coordinates;return u.segmentEach(t,function(e){var t=e.geometry.coordinates[0],i=e.geometry.coordinates[1],a=function(e,t,r,n){var o=[r[0]-t[0],r[1]-t[1]],i=l([e[0]-t[0],e[1]-t[1]],o);if(i<=0)return c(e,t,{method:n.method,units:"degrees"});var a=l(o,o);if(a<=i)return c(e,r,{method:n.method,units:"degrees"});var u=i/a,s=[t[0]+u*o[0],t[1]+u*o[1]];return c(e,s,{method:n.method,units:"degrees"})}(o,t,i,r);a<n&&(n=a)}),i.convertLength(n,"degrees",r.units)}},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&g())}function g(){if(!c){var e=u(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||u(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){},function(e,t,r){var n=r(67)(Object.keys,Object);e.exports=n},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var n=r(5)(r(3),"DataView");e.exports=n},function(e,t,r){var n=r(38),o=r(73),i=r(11),a=r(40),u=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?h:u).test(a(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(10),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[u]=r:delete e[u]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,o=r(74),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(3)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(5)(r(3),"Promise");e.exports=n},function(e,t,r){var n=r(5)(r(3),"Set");e.exports=n},function(e,t,r){var n=r(5)(r(3),"WeakMap");e.exports=n},function(e,t,r){var n=r(9),o=r(12),i="[object Arguments]";e.exports=function(e){return o(e)&&n(e)==i}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(9),o=r(23),i=r(12),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},function(e,t,r){(function(e){var n=r(39),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,u=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=u}).call(this,r(41)(e))},function(e,t,r){var n=r(44),o=r(45),i=r(111),a=r(115),u=r(37),s=r(2),l=r(24),c=r(25),f=1,h="[object Arguments]",g="[object Array]",p="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,v,y,m){var b=s(e),w=s(t),P=b?g:u(e),x=w?g:u(t),M=(P=P==h?p:P)==p,S=(x=x==h?p:x)==p,E=P==x;if(E&&l(e)){if(!l(t))return!1;b=!0,M=!1}if(E&&!M)return m||(m=new n),b||c(e)?o(e,t,r,v,y,m):i(e,t,P,r,v,y,m);if(!(r&f)){var L=M&&d.call(e,"__wrapped__"),k=S&&d.call(t,"__wrapped__");if(L||k){var _=L?e.value():e,j=k?t.value():t;return m||(m=new n),y(_,j,r,v,m)}}return!!E&&(m||(m=new n),a(e,t,r,v,y,m))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(17),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},function(e,t,r){var n=r(17);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(17);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(17);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(16);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(16),o=r(22),i=r(28),a=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var u=r.__data__;if(!o||u.length<a-1)return u.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(u)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(95),o=r(16),i=r(22);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(e,t,r){var n=r(96),o=r(97),i=r(98),a=r(99),u=r(100);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,r){var n=r(18);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(18),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===o?void 0:r}return i.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(18),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(18),o="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?o:t,this}},function(e,t,r){var n=r(19);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(19);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(19);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(19);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(28),o=r(107),i=r(108);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,t){var r="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,r),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(10),o=r(112),i=r(27),a=r(45),u=r(113),s=r(114),l=1,c=2,f="[object Boolean]",h="[object Date]",g="[object Error]",p="[object Map]",d="[object Number]",v="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",P="[object DataView]",x=n?n.prototype:void 0,M=x?x.valueOf:void 0;e.exports=function(e,t,r,n,x,S,E){switch(r){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!S(new o(e),new o(t)));case f:case h:case d:return i(+e,+t);case g:return e.name==t.name&&e.message==t.message;case v:case m:return e==t+"";case p:var L=u;case y:var k=n&l;if(L||(L=s),e.size!=t.size&&!k)return!1;var _=E.get(e);if(_)return _==t;n|=c,E.set(e,t);var j=a(L(e),L(t),n,x,S,E);return E.delete(e),j;case b:if(M)return M.call(e)==M.call(t)}return!1}},function(e,t,r){var n=r(3).Uint8Array;e.exports=n},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},function(e,t,r){var n=r(116),o=1,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,u,s){var l=r&o,c=n(e),f=c.length;if(f!=n(t).length&&!l)return!1;for(var h=f;h--;){var g=c[h];if(!(l?g in t:i.call(t,g)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var d=!0;s.set(e,t),s.set(t,e);for(var v=l;++h<f;){var y=e[g=c[h]],m=t[g];if(a)var b=l?a(m,y,g,t,e,s):a(y,m,g,e,t,s);if(!(void 0===b?y===m||u(y,m,r,a,s):b)){d=!1;break}v||(v="constructor"==g)}if(d&&!v){var w=e.constructor,P=t.constructor;w!=P&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof P&&P instanceof P)&&(d=!1)}return s.delete(e),s.delete(t),d}},function(e,t,r){var n=r(117),o=r(118),i=r(20);e.exports=function(e){return n(e,i,o)}},function(e,t,r){var n=r(46),o=r(2);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},function(e,t,r){var n=r(47),o=r(119),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return i.call(e,t)}))}:o;e.exports=u},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(121),o=r(15),i=r(2),a=r(24),u=r(29),s=r(25),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),c=!r&&o(e),f=!r&&!c&&a(e),h=!r&&!c&&!f&&s(e),g=r||c||f||h,p=g?n(e.length,String):[],d=p.length;for(var v in e)!t&&!l.call(e,v)||g&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,d))||p.push(v);return p}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(30);e.exports=function(e,t){var r=[];return n(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}},function(e,t,r){var n=r(124),o=r(20);e.exports=function(e,t){return e&&n(e,t,o)}},function(e,t,r){var n=r(125)();e.exports=n},function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),u=a.length;u--;){var s=a[e?u:++o];if(!1===r(i[s],s,i))break}return t}}},function(e,t,r){var n=r(6);e.exports=function(e,t){return function(r,o){if(null==r)return r;if(!n(r))return e(r,o);for(var i=r.length,a=t?i:-1,u=Object(r);(t?a--:++a<i)&&!1!==o(u[a],a,u););return r}}},function(e,t,r){var n=r(128),o=r(129),i=r(51);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(44),o=r(26),i=1,a=2;e.exports=function(e,t,r,u){var s=r.length,l=s,c=!u;if(null==e)return!l;for(e=Object(e);s--;){var f=r[s];if(c&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<l;){var h=(f=r[s])[0],g=e[h],p=f[1];if(c&&f[2]){if(void 0===g&&!(h in e))return!1}else{var d=new n;if(u)var v=u(g,p,h,e,t,d);if(!(void 0===v?o(p,g,i|a,u,d):v))return!1}}return!0}},function(e,t,r){var n=r(50),o=r(20);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,n(a)]}return t}},function(e,t,r){var n=r(26),o=r(31),i=r(136),a=r(32),u=r(50),s=r(51),l=r(21),c=1,f=2;e.exports=function(e,t){return a(e)&&u(t)?s(l(e),t):function(r){var a=o(r,e);return void 0===a&&a===t?i(r,e):n(t,a,c|f)}}},function(e,t,r){var n=r(132),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)}),t});e.exports=a},function(e,t,r){var n=r(133),o=500;e.exports=function(e){var t=n(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=r(28),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},function(e,t,r){var n=r(135);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(10),o=r(33),i=r(2),a=r(7),u=1/0,s=n?n.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-u?"-0":r}},function(e,t,r){var n=r(137),o=r(138);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(53),o=r(15),i=r(2),a=r(29),u=r(23),s=r(21);e.exports=function(e,t,r){for(var l=-1,c=(t=n(t,e)).length,f=!1;++l<c;){var h=s(t[l]);if(!(f=null!=e&&r(e,h)))break;e=e[h]}return f||++l!=c?f:!!(c=null==e?0:e.length)&&u(c)&&a(h,c)&&(i(e)||o(e))}},function(e,t,r){var n=r(140),o=r(141),i=r(32),a=r(21);e.exports=function(e){return i(e)?n(a(e)):o(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(52);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t,r){var n=r(13),o=r(6),i=r(20);e.exports=function(e){return function(t,r,a){var u=Object(t);if(!o(t)){var s=n(r,3);t=i(t),r=function(e){return s(u[e],e,u)}}var l=e(t,r,a);return l>-1?u[s?t[l]:l]:void 0}}},function(e,t,r){var n=r(144),o=r(13),i=r(145),a=Math.max;e.exports=function(e,t,r){var u=null==e?0:e.length;if(!u)return-1;var s=null==r?0:i(r);return s<0&&(s=a(u+s,0)),n(e,o(t,3),s)}},function(e,t){e.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},function(e,t,r){var n=r(146);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},function(e,t,r){var n=r(147),o=1/0,i=1.7976931348623157e308;e.exports=function(e){return e?(e=n(e))===o||e===-o?(e<0?-1:1)*i:e==e?e:0:0===e?e:0}},function(e,t,r){var n=r(11),o=r(7),i=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return i;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=s.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):u.test(e)?i:+e}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(8);e.exports=function(e){return"function"==typeof e?e:n}},function(e,t,r){var n=r(7);e.exports=function(e,t,r){for(var o=-1,i=e.length;++o<i;){var a=e[o],u=t(a);if(null!=u&&(void 0===s?u==u&&!n(u):r(u,s)))var s=u,l=a}return l}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,r){var n=r(46),o=r(153);e.exports=function e(t,r,i,a,u){var s=-1,l=t.length;for(i||(i=o),u||(u=[]);++s<l;){var c=t[s];r>0&&i(c)?r>1?e(c,r-1,i,a,u):n(u,c):a||(u[u.length]=c)}return u}},function(e,t,r){var n=r(10),o=r(15),i=r(2),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},function(e,t,r){var n=r(33),o=r(13),i=r(57),a=r(155),u=r(42),s=r(156),l=r(8);e.exports=function(e,t,r){var c=-1;t=n(t.length?t:[l],u(o));var f=i(e,function(e,r,o){return{criteria:n(t,function(t){return t(e)}),index:++c,value:e}});return a(f,function(e,t){return s(e,t,r)})}},function(e,t){e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},function(e,t,r){var n=r(157);e.exports=function(e,t,r){for(var o=-1,i=e.criteria,a=t.criteria,u=i.length,s=r.length;++o<u;){var l=n(i[o],a[o]);if(l)return o>=s?l:l*("desc"==r[o]?-1:1)}return e.index-t.index}},function(e,t,r){var n=r(7);e.exports=function(e,t){if(e!==t){var r=void 0!==e,o=null===e,i=e==e,a=n(e),u=void 0!==t,s=null===t,l=t==t,c=n(t);if(!s&&!c&&!a&&e>t||a&&u&&l&&!s&&!c||o&&u&&l||!r&&l||!i)return 1;if(!o&&!a&&!c&&e<t||c&&r&&i&&!o&&!a||s&&r&&i||!u&&i||!l)return-1}return 0}},function(e,t,r){var n=r(8),o=r(159),i=r(161);e.exports=function(e,t){return i(o(e,t,n),e+"")}},function(e,t,r){var n=r(160),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,u=o(i.length-t,0),s=Array(u);++a<u;)s[a]=i[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=i[a];return l[t]=r(s),n(e,this,l)}}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(162),o=r(165)(n);e.exports=o},function(e,t,r){var n=r(163),o=r(164),i=r(8),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var n=r(5),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t){var r=800,n=16,o=Date.now;e.exports=function(e){var t=0,i=0;return function(){var a=o(),u=n-(a-i);if(i=a,u>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(27),o=r(6),i=r(29),a=r(11);e.exports=function(e,t,r){if(!a(r))return!1;var u=typeof t;return!!("number"==u?o(r)&&i(t,r.length):"string"==u&&t in r)&&n(r[t],e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(4);function i(e,t,r){if(void 0===r&&(r={}),!0===r.final)return function(e,t){var r=i(t,e);return r=(r+180)%360}(e,t);var a=o.getCoord(e),u=o.getCoord(t),s=n.degreesToRadians(a[0]),l=n.degreesToRadians(u[0]),c=n.degreesToRadians(a[1]),f=n.degreesToRadians(u[1]),h=Math.sin(l-s)*Math.cos(f),g=Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(l-s);return n.radiansToDegrees(Math.atan2(h,g))}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(4);t.default=function(e,t,r,i){void 0===i&&(i={});var a=o.getCoord(e),u=n.degreesToRadians(a[0]),s=n.degreesToRadians(a[1]),l=n.degreesToRadians(r),c=n.lengthToRadians(t,i.units),f=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(l)),h=u+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(f)),g=n.radiansToDegrees(h),p=n.radiansToDegrees(f);return n.point([g,p],i.properties)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(4),a=n(r(171)),u=r(173),s=n(r(174));function l(e,t){var r=i.getCoords(e),n=i.getCoords(t);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=r[0][0],u=r[0][1],s=r[1][0],l=r[1][1],c=n[0][0],f=n[0][1],h=n[1][0],g=n[1][1],p=(g-f)*(s-a)-(h-c)*(l-u),d=(h-c)*(u-f)-(g-f)*(a-c),v=(s-a)*(u-f)-(l-u)*(a-c);if(0===p)return null;var y=d/p,m=v/p;if(y>=0&&y<=1&&m>=0&&m<=1){var b=a+y*(s-a),w=u+y*(l-u);return o.point([b,w])}return null}t.default=function(e,t){var r={},n=[];if("LineString"===e.type&&(e=o.feature(e)),"LineString"===t.type&&(t=o.feature(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var c=l(e,t);return c&&n.push(c),o.featureCollection(n)}var f=s.default();return f.load(a.default(t)),u.featureEach(a.default(e),function(e){u.featureEach(f.search(e),function(t){var o=l(e,t);if(o){var a=i.getCoords(o).join(",");r[a]||(r[a]=!0,n.push(o))}})}),o.featureCollection(n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(4),i=r(172);t.default=function(e){if(!e)throw new Error("geojson is required");var t=[];return i.flattenEach(e,function(e){!function(e,t){var r=[],i=e.geometry;if(null!==i){switch(i.type){case"Polygon":r=o.getCoords(i);break;case"LineString":r=[o.getCoords(i)]}r.forEach(function(r){var o=function(e,t){var r=[];return e.reduce(function(e,o){var i,a,u,s,l,c,f=n.lineString([e,o],t);return f.bbox=(a=o,u=(i=e)[0],s=i[1],l=a[0],c=a[1],[u<l?u:l,s<c?s:c,u>l?u:l,s>c?s:c]),r.push(f),o}),r}(r,e.properties);o.forEach(function(e){e.id=t.length,t.push(e)})})}}(e,t)}),n.featureCollection(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){var n=r(175),o=r(1),i=r(177),a=r(178).default,u=i.featureEach,s=(i.coordEach,o.polygon,o.featureCollection);function l(e){var t=n(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),n.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)}):u(e,function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)}),n.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),n.prototype.remove.call(this,e,t)},t.clear=function(){return n.prototype.clear.call(this)},t.search=function(e){var t=n.prototype.search.call(this,this.toBBox(e));return s(t)},t.collides=function(e){return n.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=n.prototype.all.call(this);return s(e)},t.toJSON=function(){return n.prototype.toJSON.call(this)},t.fromJSON=function(e){return n.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=a(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=a(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}e.exports=l,e.exports.default=l},function(e,t,r){"use strict";e.exports=o,e.exports.default=o;var n=r(176);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function a(e,t){u(e,0,e.children.length,t,e)}function u(e,t,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<r;a++)i=e.children[a],s(o,e.leaf?n(i):i);return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,r,o,i){for(var a,u=[t,r];u.length;)(r=u.pop())-(t=u.pop())<=o||(a=t+Math.ceil((r-t)/o/2)*o,n(e,a,t,r,i),u.push(t,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!p(e,t))return r;for(var o,i,a,u,s=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],p(e,u=t.leaf?n(a):a)&&(t.leaf?r.push(a):g(e,u)?this._all(a,r):s.push(a));t=s.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!p(e,t))return!1;for(var n,o,i,a,u=[];t;){for(n=0,o=t.children.length;n<o;n++)if(i=t.children[n],p(e,a=t.leaf?r(i):i)){if(t.leaf||g(e,a))return!0;u.push(i)}t=u.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,u=this.data,s=this.toBBox(e),l=[],c=[];u||l.length;){if(u||(u=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),u.leaf&&-1!==(o=i(e,u.children,t)))return u.children.splice(o,1),l.push(u),this._condense(l),this;a||u.leaf||!g(u,s)?n?(r++,u=n.children[r],a=!1):u=null:(l.push(u),c.push(r),r=0,n=u,u=u.children[0])}return this},toBBox:function(e){return e},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var o,i=r-t+1,u=this._maxEntries;if(i<=u)return a(o=d(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(u)),u=Math.ceil(i/Math.pow(u,n-1))),(o=d([])).leaf=!1,o.height=n;var s,l,c,f,h=Math.ceil(i/u),g=h*Math.ceil(Math.sqrt(u));for(v(e,t,r,g,this.compareMinX),s=t;s<=r;s+=g)for(v(e,s,c=Math.min(s+g-1,r),h,this.compareMinY),l=s;l<=c;l+=h)f=Math.min(l+h-1,c),o.children.push(this._build(e,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var o,i,a,u,s,l,c,h,g,p;n.push(t),!t.leaf&&n.length-1!==r;){for(c=h=1/0,o=0,i=t.children.length;o<i;o++)s=f(a=t.children[o]),g=e,p=a,(l=(Math.max(p.maxX,g.maxX)-Math.min(p.minX,g.minX))*(Math.max(p.maxY,g.maxY)-Math.min(p.minY,g.minY))-s)<h?(h=l,c=s<c?s:c,u=a):l===h&&s<c&&(c=s,u=a);t=u||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,o=r?e:n(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),s(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),u=d(r.children.splice(i,r.children.length-i));u.height=r.height,u.leaf=r.leaf,a(r,this.toBBox),a(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(r,u)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,i,a,s,l,c,h,g,p,d,v,y,m;for(l=c=1/0,n=t;n<=r-t;n++)o=u(e,0,n,this.toBBox),i=u(e,n,r,this.toBBox),g=o,p=i,d=void 0,v=void 0,y=void 0,m=void 0,d=Math.max(g.minX,p.minX),v=Math.max(g.minY,p.minY),y=Math.min(g.maxX,p.maxX),m=Math.min(g.maxY,p.maxY),a=Math.max(0,y-d)*Math.max(0,m-v),s=f(o)+f(i),a<l?(l=a,h=n,c=s<c?s:c):a===l&&s<c&&(c=s,h=n);return h},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:l,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var o,i,a=this.toBBox,l=u(e,0,t,a),c=u(e,r-t,r,a),f=h(l)+h(c);for(o=t;o<r-t;o++)i=e.children[o],s(l,e.leaf?a(i):i),f+=h(l);for(o=r-t-1;o>=t;o--)i=e.children[o],s(c,e.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)s(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},function(e,t,r){e.exports=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var u=i-o+1,s=n-o+1,l=Math.log(u),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(u-c)/u)*(s-u/2<0?-1:1),h=Math.max(o,Math.floor(n-s*c/u+f)),g=Math.min(i,Math.floor(n+(u-s)*c/u+f));t(r,n,h,g,a)}var p=r[n],d=o,v=i;for(e(r,o,n),a(r[i],p)>0&&e(r,o,i);d<v;){for(e(r,d,v),d++,v--;a(r[d],p)<0;)d++;for(;a(r[v],p)>0;)v--}0===a(r[o],p)?e(r,o,v):e(r,++v,i),v<=n&&(o=v+1),n<=v&&(i=v-1)}}(r,n,o||0,i||r.length-1,a||t)}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(179);t.default=function(e){var t=[1/0,1/0,-1/0,-1/0];return n.coordEach(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){if(null!==e)for(var n,i,a,u,s,l,c,f,h=0,g=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,m=0;m<y;m++){s=(f=!!(c=d?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<s;b++){var w=0,P=0;if(null!==(u=f?c.geometries[b]:c)){l=u.coordinates;var x=u.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,g,m,w,P))return!1;g++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],g,m,w,P))return!1;g++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===t(l[n][i],g,m,w,P))return!1;g++}"MultiLineString"===x&&w++,"Polygon"===x&&P++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(P=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===t(l[n][i][a],g,m,w,P))return!1;g++}P++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function u(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function s(e,t){u(e,function(e,r,o,i,a){var u,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:u,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,o),r,l))return!1}})}function l(e,t){s(e,function(e,r,i){var a=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var s,l=0,c=0,f=0;return!1!==o(e,function(o,u,h,g,p){if(void 0===s||r>l||g>c||p>f)return s=o,l=r,c=g,f=p,void(a=0);var d=n.lineString([s,o],e.properties);if(!1===t(d,r,i,p,a))return!1;a++,s=o})&&void 0}}})}function c(e,t){if(!e)throw new Error("geojson is required");s(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===t(n.lineString(a[u],e.properties),r,o,u))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,u){i=0===n&&void 0===r?e:t(i,e,n,o,a,u)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=u,t.geomReduce=function(e,t,r){var n=r;return u(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n},t.flattenEach=s,t.flattenReduce=function(e,t,r){var n=r;return s(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,o=!1;return l(e,function(e,i,a,u,s){n=!1===o&&void 0===r?e:t(n,e,i,a,u,s),o=!0}),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=l.length+u-1),n.lineString([l[u],l[u+1]],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u-1),n.lineString([l[a][u],l[a][u+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u-1),n.lineString([l[i][u],l[i][u+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u-1),n.lineString([l[i][a][u],l[i][a][u+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),s=s||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],s,t);case"LineString":return u<0&&(u=l.length+u),n.point(l[u],s,t);case"Polygon":return a<0&&(a=l.length+a),u<0&&(u=l[a].length+u),n.point(l[a][u],s,t);case"MultiLineString":return i<0&&(i=l.length+i),u<0&&(u=l[i].length+u),n.point(l[i][u],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u<0&&(u=l[i][a].length-u),n.point(l[i][a][u],s,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(4);t.default=function(e,t,r){void 0===r&&(r={});var i=o.getCoord(e),a=o.getCoord(t);a[0]+=a[0]-i[0]>180?-360:i[0]-a[0]>180?360:0;var u=function(e,t,r){var o=r=void 0===r?n.earthRadius:Number(r),i=e[1]*Math.PI/180,a=t[1]*Math.PI/180,u=a-i,s=Math.abs(t[0]-e[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(l)>1e-11?u/l:Math.cos(i);return Math.sqrt(u*u+c*c*s*s)*o}(i,a);return n.convertLength(u,"meters",r.units)}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(60),a=r.n(i);function u(e,t,r){if(!l(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&c(n),o&&f(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function s(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function l(e){return!!e&&e.constructor===Object}function c(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!s(e))throw new Error("bbox must only contain numbers")})}function f(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function h(e,t){var r,n,o,i,a,u,s,l,c,f,h=0,g="FeatureCollection"===e.type,p="Feature"===e.type,d=g?e.features.length:1;for(r=0;r<d;r++){for(u=g?e.features[r].geometry:p?e.geometry:e,l=g?e.features[r].properties:p?e.properties:{},c=g?e.features[r].bbox:p?e.bbox:void 0,f=g?e.features[r].id:p?e.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=s?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function g(e,t){h(e,function(e,r,n,o,i){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(u(e,n,{bbox:o,id:i}),r,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(u({type:a,coordinates:c},n),r,l))return!1}})}function p(e,t){if(!v(t=t||{}))throw new Error("options is invalid");var r=t.bbox,n=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");r&&y(r),n&&m(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=e,o}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function v(e){return!!e&&e.constructor===Object}function y(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!d(e))throw new Error("bbox must only contain numbers")})}function m(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}var b=function(e){if(!e)throw new Error("geojson is required");var t=[];return g(e,function(e){t.push(e)}),p(t)},w=r(34),P=r.n(w),x=r(43),M=r.n(x),S=r(48),E=r.n(S),L=r(49),k=r.n(L),_=r(54),j=r.n(_),O=r(55),F=r.n(O),C=r(31),A=r.n(C),I=r(56),R=r.n(I),T=(r(58),r(59)),G=r.n(T),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return B(e,null,[{key:"getGeoJSON",value:function(e){for(var t=e.getElementsByTagName("ExtendedData"),r=t.length-1;r>=0;r--)t[r].parentNode.removeChild(t[r]);o.a.log("KML (no ExtendedData):",e);var n=a.a.kml(e);return n=b(n),o.a.log("GeoJSON (flatten): ",n),n}},{key:"getNumberOfFeatures",value:function(e,t){return k.a(t.features,function(t){return M.a(t.geometry.type,e)}).length}},{key:"getLineString",value:function(e){return j.a(e.features,function(e){return M.a(e.geometry.type,"LineString")})}},{key:"getDistanceToNearestPointOnLine",value:function(e){return A.a(e,"properties.nearestOnLine.properties.dist",Number.MAX_VALUE)}},{key:"getLocationOfNearestPointOnLine",value:function(e){return A.a(e,"properties.nearestOnLine.properties.location",0)}},{key:"reverseLineString",value:function(e){var t=N({},e);return t.geometry.coordinates=e.geometry.coordinates.reverse(),t}},{key:"getPoints",value:function(e){return k.a(e.features,function(e){return M.a(e.geometry.type,"Point")})}},{key:"getRoute",value:function(e){return o.a.debug("Fetching route from:",e),$.ajax(e)}},{key:"getGoogleMapsLatLng",value:function(e){return new google.maps.LatLng(e[1],e[0])}},{key:"getGoogleMapsPath",value:function(t){return R.a(t.geometry.coordinates,function(t){return e.getGoogleMapsLatLng(t)})}},{key:"getPathElevations",value:function(e,t){if(t&&3===e.geometry.coordinates[0].length){o.a.debug("Getting path elevations from line string...");var r=R.a(e.geometry.coordinates,function(e){return{elevation:e[2]}});return o.a.debug("Elevations:",r),new Promise(function(e,t){e(r)})}var n=this.getGoogleMapsPath(e);if(o.a.debug("Number of LatLng objects:",n.length),n.length>1024){for(var i=[],a=parseFloat(n.length/1024),u=0;u<n.length;u+=a)i.push(n[Math.floor(u)]);n=i,o.a.debug("Number of LatLng objects after optimization:",n.length)}return new Promise(function(e,t){(new google.maps.ElevationService).getElevationAlongPath({path:n,samples:512},function(r,n){n===google.maps.ElevationStatus.OK?e(r):t(n)})})}},{key:"getRouteParameters",value:function(e){return new Promise(function(t,r){$.ajax(e).done(function(e){o.a.debug("Route parameters:",e),1===e.success?t(e):r("Server side error: "+e.error)}).fail(function(e,t){r(t)})})}},{key:"approveRoute",value:function(e){return new Promise(function(t,r){$.ajax(e).done(function(e){t({success:!0})}).fail(function(e,t){r(t)})})}}]),e}(),X=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var q=function(e){for(var t=0,r=1;r<e.length;r++){var n=e[r].elevation-e[r-1].elevation;t+=n>0?n:0}return Number(t)},U=function(e){for(var t=0,r=1;r<e.length;r++){var n=e[r-1].elevation-e[r].elevation;t+=n>0?n:0}return Number(t)},z=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gain=q(t),this.loss=U(t),this.totalChange=this.loss+this.gain,this.data=t}return X(e,[{key:"enrichData",value:function(e){for(var t=[],r=e/this.data.length,n=0;n<this.data.length;n++)t.push({elevation:this.data[n].elevation,distance:n*r});this.data=t}}]),e}(),Y=r(61),V=r.n(Y),J={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function W(e,t,r){if(!ne(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&oe(n),o&&ie(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function H(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!re(e[0])||!re(e[1]))throw new Error("coordinates must contain numbers");return W({type:"Point",coordinates:e},t,r)}function K(e,t,r){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!re(e[0][1])||!re(e[0][1]))throw new Error("coordinates must contain numbers");return W({type:"LineString",coordinates:e},t,r)}function Q(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=J[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}function Z(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=J[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function ee(e){if(null==e)throw new Error("radians is required");return 180*(e%(2*Math.PI))/Math.PI}function te(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}function re(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function ne(e){return!!e&&e.constructor===Object}function oe(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!re(e))throw new Error("bbox must only contain numbers")})}function ie(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function ae(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ue(e,t,r){if(!ne(r=r||{}))throw new Error("options is invalid");if(!0===r.final)return function(e,t){var r=ue(t,e);return r=(r+180)%360}(e,t);var n=ae(e),o=ae(t),i=te(n[0]),a=te(o[0]),u=te(n[1]),s=te(o[1]),l=Math.sin(a-i)*Math.cos(s),c=Math.cos(u)*Math.sin(s)-Math.sin(u)*Math.cos(s)*Math.cos(a-i);return ee(Math.atan2(l,c))}var se=ue;var le=function(e,t,r){if(!ne(r=r||{}))throw new Error("options is invalid");var n=r.units,o=ae(e),i=ae(t),a=te(i[1]-o[1]),u=te(i[0]-o[0]),s=te(o[1]),l=te(i[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(s)*Math.cos(l);return Q(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n)};var ce=function(e,t,r,n){if(!ne(n=n||{}))throw new Error("options is invalid");var o=n.units,i=n.properties,a=ae(e),u=te(a[0]),s=te(a[1]),l=te(r),c=Z(t,o),f=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(l));return H([ee(u+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(f))),ee(f)],i)};var fe=function(e,t,r,n){if(!ne(n=n||{}))throw new Error("options is invalid");var o,i=[];if("Feature"===e.type)o=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");o=e.coordinates}for(var a,u,s,l=0,c=0;c<o.length&&!(t>=l&&c===o.length-1);c++){if(l>t&&0===i.length){if(!(a=t-l))return i.push(o[c]),K(i);u=se(o[c],o[c-1])-180,s=ce(o[c],a,u,n),i.push(s.geometry.coordinates)}if(l>=r)return(a=r-l)?(u=se(o[c],o[c-1])-180,s=ce(o[c],a,u,n),i.push(s.geometry.coordinates),K(i)):(i.push(o[c]),K(i));if(l>=t&&i.push(o[c]),c===o.length-1)return K(i);l+=le(o[c],o[c+1],n)}return K(o[o.length-1])},he=r(62),ge=r.n(he),pe=r(63),de=r.n(pe),ve=r(14),ye=r.n(ve),me=r(1),be=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var we={distance:ye.a,length:V.a,lineSliceAlong:fe,point:me.point,pointToLineDistance:de.a,nearestPointOnLine:ge.a,options:{units:"meters"}},Pe=0,xe=1,Me=14,Se=15,Ee=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.points=t,this.path=r,this.pathReversed=!1,this.pathCircular=!1,this.addIndexes(),this.sortByIndex(),this.pathStart=we.point(this.path.geometry.coordinates[0]),this.pathEnd=we.point(this.path.geometry.coordinates[this.path.geometry.coordinates.length-1]),this.updateCircularity(),this.updateDirection(),this.findNearestPointsOnPath(),this.sortByLocationOnPath()}return be(e,[{key:"findNearestPointsOnPath",value:function(){var e=this,t=we.length(this.path,we.options)/10,r=t/10,n=null;F.a(this.points,function(i){var a=i.geometry.coordinates;if(we.pointToLineDistance(a,e.path,we.options)>200)return o.a.debug("Point "+i.properties.name+" too far from the path. \n                              Not looking for nearest point on line for it."),i.properties.nearestOnLine=we.nearestPointOnLine(e.path,i,we.options),!0;o.a.debug("Looking for nearest point on line for "+i.properties.name);var u=A.a(n,"properties.location",0),s=u+t;n=null;for(var l=0,c=Number.MAX_VALUE;c!==l||c>200;s+=r){var f=we.lineSliceAlong(e.path,u,s,we.options);n=we.nearestPointOnLine(f,i,we.options),l=c,c=we.pointToLineDistance(a,f,we.options)}i.properties.nearestOnLine=n,i.properties.nearestOnLine.properties.location+=u,o.a.debug("Distance from path: \n                "+i.properties.nearestOnLine.properties.dist.toFixed(2)+" meter(s)."),o.a.debug("Location on path: \n                "+i.properties.nearestOnLine.properties.location.toFixed(2)+" meter(s)."),e.addDebugInformationToMap(i,n)})}},{key:"addDebugInformationToMap",value:function(e,t){o.a.getLevel()<=o.a.levels.DEBUG&&window.map&&(new google.maps.Marker({position:D.getGoogleMapsLatLng(t.geometry.coordinates),map:window.map,label:{fontWeight:"bold",text:""+e.properties.index},title:""+e.properties.index,icon:"https://maps.google.com/mapfiles/ms/icons/yellow.png"}),new google.maps.Marker({position:D.getGoogleMapsLatLng(e.geometry.coordinates),map:window.map,label:{fontWeight:"bold",text:""+e.properties.index},title:""+e.properties.index,icon:"https://maps.google.com/mapfiles/ms/icons/blue.png"}))}},{key:"sortByIndex",value:function(){this.points=G.a(this.points,function(e){return function(e){return A.a(e,"properties.index",Number.MAX_VALUE)}(e)})}},{key:"sortByLocationOnPath",value:function(){this.points=G.a(this.points,function(e){return function(e){return A.a(e,"properties.nearestOnLine.properties.location",Number.MAX_VALUE)}(e)})}},{key:"addIndexes",value:function(){this.points=R.a(this.points,function(e){var t=e.properties.name;return e.properties.index=function(e){var t=/^(wstp|wprowadzenie|pocztek|start)$/gi,r=/^(zakoczenie|koniec|podsumowanie)$/gi,n=/^(I|II|III|IV|V|VI|VII|VIII|IX|X|XI|XII|XIII|XIV)$/g,i=/^\d+$/g,a={I:1,II:2,III:3,IV:4,V:5,VI:6,VII:7,VIII:8,IX:9,X:10,XI:11,XII:12,XIII:13,XIV:14},u=null;if(o.a.debug("Checking station index for string: "+e),!e)return u;var s=e.trim().split(/[ ,\._\-:;]+/);return F.a(s,function(e){var o=e.match(n);if(!E.a(o))return u=a[o[0]],!1;if(o=e.match(i),!E.a(o)){var s=parseInt(o[0]);return!(s>=xe&&s<=Me&&(u=s,1))}return o=e.match(t),E.a(o)?(o=e.match(r),E.a(o)?void 0:(u=Se,!1)):(u=Pe,!1)}),u}(t),e})}},{key:"updateDirection",value:function(){var e=function(e,t){return e.properties.index===t},t=k.a(this.points,function(t){return e(t,Pe)||e(t,xe)}),r=k.a(this.points,function(t){return e(t,Se)||e(t,Me)});if(P.a(t)){if(!P.a(r)){o.a.debug("End point detected. Checking if it is closer to path start or path end...");var n=we.distance(this.pathStart,r[0],we.options);we.distance(this.pathEnd,r[0],we.options)>n&&(o.a.debug("Reversed path detected. Start point is closer to path end."),this.pathReversed=!0)}}else o.a.debug("Start point detected. Checking if it is closer to path start or path end..."),we.distance(this.pathStart,t[0],we.options)>we.distance(this.pathEnd,t[0],we.options)&&(o.a.debug("Reversed path detected. Start point is closer to path end."),this.pathReversed=!0);this.pathReversed&&(o.a.debug("Reversing points."),this.path=D.reverseLineString(this.path))}},{key:"updateCircularity",value:function(){var e=we.distance(this.pathStart,this.pathEnd,we.options);o.a.debug("Distance between path start and end points:",e.toFixed(2),"meters."),e<=1e3?(o.a.debug("Circular path detected."),this.pathCircular=!0):(o.a.debug("Circular path not detected."),this.pathCircular=!1)}},{key:"getCount",value:function(){for(var e=this,t=0,r=function(r){var n="",i=k.a(e.points,function(e){return e.properties.index===r&&(n=e.properties.name,!0)});1!==i.length?o.a.warn("Station "+r+" found "+i.length+" times."):(o.a.debug("Station "+r+" found. Station name: "+n),t++)},n=xe;n<=Me;n++)r(n);return t}},{key:"isOrderCorrect",value:function(){for(var e=!0,t=1;t<this.points.length;t++){var r=this.points[t].properties.index,n=this.points[t-1].properties.index;o.a.debug("Point "+(t-1)),null===r?o.a.debug("Not checking order for unrecognized point: "+this.points[t].properties.name):null===n?o.a.debug("Not checking order for unrecognized point: "+this.points[t-1].properties.name):this.pathCircular&&(n===xe&&r===Me||r===xe&&n===Me)?o.a.debug("Not checking order for station",xe,"and",Me,"when route is circular."):r<=n?(o.a.warn("Detected invalid order of stations. \n                    Station "+r+" is after station "+n+"."),e=!1):o.a.debug("Station "+r+" is after station "+n+".")}return e}},{key:"areAllOnThePath",value:function(e){var t=!0;return F.a(this.points,function(r,n){var i=r.properties.index;if(o.a.debug("Point "+n),null===i)o.a.debug("Not checking distance for: "+r.properties.name);else{var a=D.getDistanceToNearestPointOnLine(r);o.a.debug("Station "+i+" distance from path: \n                    "+a.toFixed(2)+" meter(s)."),a>e?(o.a.warn("Station "+i+" is too far from path. \n                        Expected maximum distance from path: "+e+" meter(s)."),t=!1):o.a.debug("Station "+i+" is on the path.")}}),t}},{key:"getUpdatedPath",value:function(){var e=j.a(this.points,function(e){return e.properties.index===Me});if(null!==e){var t=D.getLocationOfNearestPointOnLine(e);if(t>0)return o.a.debug("getPathEndingOnLastStation: Returning sliced path. Last station location: "+t.toFixed(2)),we.lineSliceAlong(this.path,0,t,we.options)}return o.a.debug("getPathEndingOnLastStation: Returning original path. Last station not found."),this.path}}]),e}(),Le=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geoJson=t,this.lineString=D.getLineString(this.geoJson),this.points=D.getPoints(this.geoJson),this.isRouteVerifiable=!0,P.a(this.lineString)&&(o.a.error("No line string in route."),this.isRouteVerifiable=!1),P.a(this.points)&&o.a.error("No points in route."),this.isRouteVerifiable&&(this.stations=new Ee(this.points,this.lineString),this.path=this.stations.getUpdatedPath(),this.numberOfPaths=D.getNumberOfFeatures("LineString",this.geoJson))}return Le(e,[{key:"isVerifiable",value:function(){return this.isRouteVerifiable}},{key:"isSinglePath",value:function(){var e=M.a(this.numberOfPaths,1);return e||o.a.warn("No single path defined."),o.a.debug("isSinglePath:",e,", numberOfPaths:",this.numberOfPaths),e}},{key:"areAllStationsPresent",value:function(){var e=this.stations.getCount(),t=M.a(e,14);return o.a.debug("areAllStationsPresent:",t,", numberOfStations:",e),t}},{key:"areStationsOnThePath",value:function(){var e=this.stations.areAllOnThePath(50);return o.a.debug("areStationsOnThePath:",e),e}},{key:"isStationOrderCorrect",value:function(){var e=this.stations.isOrderCorrect();return o.a.debug("isStationOrderCorrect:",e),e}},{key:"getPathLength",value:function(){var e=0,t=D.getGoogleMapsPath(this.path);return e=google.maps.geometry.spherical.computeLength(t),e/=1e3,o.a.debug("getPathLength [km]:",e),e}},{key:"fetchPathElevationData",value:function(){var e=this;return D.getPathElevations(this.path).then(function(t){return o.a.debug("Path elevations:",t),e.pathElevation=new z(t),e.pathElevation}).catch(function(e){throw new Error(e)})}},{key:"getPathElevation",value:function(){return o.a.debug("getPathElevation:",this.pathElevation),this.pathElevation}}]),e}(),_e=function(){var e=$("div#map-canvas");this.routeUrl=e.attr("data-what"),this.routeParamsUrl=e.attr("data-route-params"),this.routeApproveUrl=e.attr("data-route-approve")},je=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Oe=function(e,t){var r="bg-green",n="bg-yellow";E.a(t)?$(e+" span.info-box-icon").removeClass([n,r].join(" ")):t?$(e+" span.info-box-icon").removeClass(n).addClass(r):$(e+" span.info-box-icon").removeClass(r).addClass(n)},Fe=function(e,t,r){o.a.debug("Updating control element",e,"with:",t,r),$(e+" span.info-box-number").html(t+" "+(r?"<small>"+r+"</small>":""))},Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return je(e,[{key:"updateRouteType",value:function(e){var t=$("input#normalRouteString").attr("value"),r=$("input#inspiredRouteString").attr("value");Fe("div#routeType",e?t:r),Oe("div#routeType",!0)}},{key:"updatePathLength",value:function(e,t){Fe("div#pathLength",t.toFixed(2),"km"),Oe("div#pathLength",e)}},{key:"updateElevationGain",value:function(e,t){Fe("div#elevationGain",t.toFixed(2),"m"),Oe("div#elevationGain",e)}},{key:"updateElevationLoss",value:function(e,t){Fe("div#elevationLoss",t.toFixed(2),"m"),Oe("div#elevationLoss",e)}},{key:"updateElevationTotalChange",value:function(e,t){Fe("div#elevationTotalChange",t.toFixed(2),"m"),Oe("div#elevationTotalChange",e)}},{key:"updateNumberOfStations",value:function(e){Oe("div#numberOfStations",e)}},{key:"updateStationsOrder",value:function(e){Oe("div#stationsOrder",e)}},{key:"updateStationsOnPath",value:function(e){Oe("div#stationsOnPath",e)}},{key:"updateSinglePath",value:function(e){Oe("div#singlePath",e)}},{key:"updateDataConsistency",value:function(e){Oe("div#dataConsistency",e)}},{key:"drawElevationChart",value:function(e){var t=parseInt(e.data.length/10),r=R.a(e.data,function(e){return e.distance.toFixed()}),n=R.a(e.data,function(e){return e.elevation});o.a.debug("Drawing elevation chart. Input:",e);new Chart($("canvas#elevationChart"),{type:"line",data:{labels:r,datasets:[{label:"",data:n,fill:"start",radius:0,backgroundColor:"rgb(32, 77, 116)"}]},options:{scales:{xAxes:[{scaleLabel:{display:!0,labelString:"[km]"},ticks:{callback:function(r,n){return n%t==0||n===e.data.length-1?r:null}}}],yAxes:[{scaleLabel:{display:!0,labelString:"[m]"}}]},legend:{display:!1},tooltips:{enabled:!1}}})}},{key:"resetElevationChart",value:function(){var e=$("canvas#elevationChart").parent();$("canvas#elevationChart").remove(),e.append('<canvas id="elevationChart"></canvas>')}},{key:"addLoaderToButton",value:function(){$("button#verifyRoute").append('<div id="loader" class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')}},{key:"removeLoaderFromButton",value:function(){$("button#verifyRoute div#loader").remove()}},{key:"resetAll",value:function(e){var t=void 0===e?null:e;Fe("div#routeType",""),Oe("div#routeType",t),Fe("div#pathLength",""),Oe("div#pathLength",t),Fe("div#elevationGain",""),Oe("div#elevationGain",t),Fe("div#elevationLoss",""),Oe("div#elevationLoss",t),Fe("div#elevationTotalChange",""),Oe("div#elevationTotalChange",t),Oe("div#numberOfStations",t),Oe("div#stationsOrder",t),Oe("div#stationsOnPath",t),Oe("div#singlePath",t),Oe("div#dataConsistency",t),this.resetElevationChart()}}]),e}(),Ae=40,Ie=30,Re=500;window.GOOGLE_MAPS_API_LOADED=!0,window.gm_authFailure=function(){window.GOOGLE_MAPS_API_LOADED=!1},o.a.setLevel("warn"),window.setLogLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"debug";return o.a.setLevel(e)},$("button#verifyRoute").bind("click",function(){window.GOOGLE_MAPS_API_LOADED&&window.google&&window.google.maps||(window.GOOGLE_MAPS_API_LOADED=!1,o.a.error("Google Maps API is not loaded. Verification cannot be done."));var e=new _e,t=new Ce;t.resetAll(),t.addLoaderToButton(),D.getRoute(e.routeUrl).done(function(r){var n=D.getGeoJSON(r),i=new ke(n);if(!i.isVerifiable())return o.a.error("Route is unverifiable."),void t.resetAll(!1);var a=i.isSinglePath();t.updateSinglePath(a);var u=i.getPathLength();t.updatePathLength(!0,u);var s=i.areAllStationsPresent();t.updateNumberOfStations(s);var l=i.isStationOrderCorrect();t.updateStationsOrder(l);var c=i.areStationsOnThePath();t.updateStationsOnPath(c),i.fetchPathElevationData().then(function(){var r=i.getPathElevation();r.enrichData(u),t.updateElevationGain(!0,r.gain);var n=u>=Ae||r.gain>Re&&u>=Ie;t.updateRouteType(n),t.updateElevationLoss(!0,r.loss),t.updateElevationTotalChange(!0,r.totalChange),t.drawElevationChart(r),D.getRouteParameters(e.routeParamsUrl).then(function(i){var f=u-1<=i.length&&i.length<=u+1,h=r.gain-50<=i.ascent&&i.ascent<=r.gain+50,g=i.type===(n?0:1),p=f&&h&&g;o.a.debug("isLengthConsistent:",f,", isElevationGainConsistent:",h,", isRouteTypeConsistent:",g),t.updateDataConsistency(p),a&&s&&l&&c&&p?(o.a.info("Route verification success. Approving..."),D.approveRoute(e.routeApproveUrl).then(function(){o.a.info("Route approved.");var e=$("div#pageReloadModal"),t=setTimeout(function(){window.location.reload(1)},5e3);e.on("hide.bs.modal",function(e){return clearTimeout(t)}),e.modal()}).catch(function(e){o.a.error("Route approval error.",e)})):o.a.info("Route verification failed. Cannot be approved.")}).catch(function(e){o.a.error("Route parameters data fetching error.",e)})}).catch(function(e){o.a.error("Path elevation data fetching error.",e),t.updateElevationGain(!1,0),t.updateElevationLoss(!1,0),t.updateElevationTotalChange(!1,0),t.updateDataConsistency(!1)})}).fail(function(e,t){o.a.error("Route fetching error. Status:",t)}).always(function(){t.removeLoaderFromButton()})})}]);
//# sourceMappingURL=edk-route-verifier.min.js.map